"use strict";(self.webpackChunkairsdk_dev=self.webpackChunkairsdk_dev||[]).push([[51910],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>m});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),d=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=d(e.components);return n.createElement(l.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=d(a),h=r,m=c["".concat(l,".").concat(h)]||c[h]||u[h]||o;return a?n.createElement(m,i(i({ref:t},p),{},{components:a})):n.createElement(m,i({ref:t},p))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:r,i[1]=s;for(var d=2;d<o;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},51830:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var n=a(87462),r=(a(67294),a(3905));const o={sidebar_position:1},i="Loading external data",s={unversionedId:"development/networking-and-communication/http-communications/loading-external-data",id:"development/networking-and-communication/http-communications/loading-external-data",title:"Loading external data",description:"ActionScript 3.0 includes mechanisms for loading data from external sources.",source:"@site/docs/development/networking-and-communication/http-communications/loading-external-data.md",sourceDirName:"development/networking-and-communication/http-communications",slug:"/development/networking-and-communication/http-communications/loading-external-data",permalink:"/docs/development/networking-and-communication/http-communications/loading-external-data",draft:!1,editUrl:"https://github.com/airsdk/airsdk.dev/edit/main/docs/development/networking-and-communication/http-communications/loading-external-data.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"mainSidebar",previous:{title:"HTTP communications",permalink:"/docs/development/networking-and-communication/http-communications/"},next:{title:"Web service requests",permalink:"/docs/development/networking-and-communication/http-communications/web-service-requests/"}},l={},d=[{value:"Using the URLRequest class",id:"using-the-urlrequest-class",level:2},{value:"URLRequest properties",id:"urlrequest-properties",level:3},{value:"Setting URLRequest defaults (AIR only)",id:"setting-urlrequest-defaults-air-only",level:3},{value:"URI schemes",id:"uri-schemes",level:3},{value:"http: and https:",id:"http-and-https",level:4},{value:"file:",id:"file",level:4},{value:"app:",id:"app",level:4},{value:"app-storage:",id:"app-storage",level:4},{value:"mailto:",id:"mailto",level:4},{value:"Setting URL variables",id:"setting-url-variables",level:3},{value:"Using the URLLoader class",id:"using-the-urlloader-class",level:2},{value:"Using the URLStream class",id:"using-the-urlstream-class",level:2},{value:"The httpResponseStatus event (AIR)",id:"the-httpresponsestatus-event-air",level:4},{value:"Loading data from external documents",id:"loading-data-from-external-documents",level:2},{value:"Communicating with external scripts",id:"communicating-with-external-scripts",level:2}],p={toc:d},c="wrapper";function u(e){let{components:t,...o}=e;return(0,r.kt)(c,(0,n.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"loading-external-data"},"Loading external data"),(0,r.kt)("p",null,"ActionScript 3.0 includes mechanisms for loading data from external sources.\nThose sources can provide static content such as text files, or dynamic content\ngenerated by a web script. The data can be formatted in various ways, and\nActionScript provides functionality for decoding and accessing the data. You can\nalso send data to the external server as part of the process of retrieving data."),(0,r.kt)("h2",{id:"using-the-urlrequest-class"},"Using the URLRequest class"),(0,r.kt)("p",null,"Many APIs that load external data use the URLRequest class to define the\nproperties of necessary network request."),(0,r.kt)("h3",{id:"urlrequest-properties"},"URLRequest properties"),(0,r.kt)("p",null,"You can set the following properties of a URLRequest object in any security\nsandbox:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"contentType"),(0,r.kt)("td",{parentName:"tr",align:null},"The MIME content type of any data sent with the URL request. If no contentType is set, values are sent as ",(0,r.kt)("inlineCode",{parentName:"td"},"application/x-www-form-urlencoded"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"data"),(0,r.kt)("td",{parentName:"tr",align:null},"An object containing data to be transmitted with the URL request.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"digest"),(0,r.kt)("td",{parentName:"tr",align:null},"A string that uniquely identifies the signed Adobe platform component to be stored to (or retrieved from) the Adobe\xae Flash\xae Player cache.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"method"),(0,r.kt)("td",{parentName:"tr",align:null},"The HTTP request method, such as a GET or POST. (Content running in the AIR application security domain can specify strings other than ",(0,r.kt)("inlineCode",{parentName:"td"},'"GET"')," or ",(0,r.kt)("inlineCode",{parentName:"td"},'"POST"')," as the ",(0,r.kt)("inlineCode",{parentName:"td"},"method")," property. Any HTTP verb is allowed and ",(0,r.kt)("inlineCode",{parentName:"td"},'"GET"')," is the default method. See ",(0,r.kt)("a",{parentName:"td",href:"/docs/development/security/air-security/"},"AIR security"),".)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"requestHeaders"),(0,r.kt)("td",{parentName:"tr",align:null},"The array of HTTP request headers to be appended to the HTTP request. Note that permission to set some headers is restricted in Flash Player as well as in AIR content running outside the application security sandbox.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"url"),(0,r.kt)("td",{parentName:"tr",align:null},"Specifies the URL to be requested.")))),(0,r.kt)("p",null,"In AIR, you can set additional properties of the URLRequest class, which are\nonly available to AIR content running in the application security sandbox.\nContent in the application sandbox can also define URLs using new URL schemes\n(in addition to standard schemes like ",(0,r.kt)("inlineCode",{parentName:"p"},"file")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"http"),")."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"followRedirects"),(0,r.kt)("td",{parentName:"tr",align:null},"Specifies whether redirects are to be followed ( ",(0,r.kt)("inlineCode",{parentName:"td"},"true"),", the default value) or not ( ",(0,r.kt)("inlineCode",{parentName:"td"},"false"),"). This is only supported in the AIR application sandbox.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"manageCookies"),(0,r.kt)("td",{parentName:"tr",align:null},"Specifies whether the HTTP protocol stack should manage cookies ( ",(0,r.kt)("inlineCode",{parentName:"td"},"true"),", the default value) or not ( ",(0,r.kt)("inlineCode",{parentName:"td"},"false"),") for this request. Setting this property is only supported in the AIR application sandbox.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"authenticate"),(0,r.kt)("td",{parentName:"tr",align:null},"Specifies whether authentication requests should be handled ( ",(0,r.kt)("inlineCode",{parentName:"td"},"true"),") for this request. Setting this property is only supported in the AIR application sandbox. The default is to authenticate requests\u2014which may cause an authentication dialog box to be displayed if the server requires credentials. You can also set the user name and password using the URLRequestDefaults class\u2014see ",(0,r.kt)("a",{parentName:"td",href:"#setting-urlrequest-defaults-air-only"},"Setting URLRequest defaults (AIR only)"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"cacheResponse"),(0,r.kt)("td",{parentName:"tr",align:null},"Specifies whether response data should be cached for this request. Setting this property is only supported in the AIR application sandbox. The default is to cache the response ( ",(0,r.kt)("inlineCode",{parentName:"td"},"true"),").")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"useCache"),(0,r.kt)("td",{parentName:"tr",align:null},"Specifies whether the local cache should be consulted before this URLRequest fetches data. Setting this property is only supported in the AIR application sandbox. The default ( ",(0,r.kt)("inlineCode",{parentName:"td"},"true"),") is to use the local cached version, if available.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"userAgent"),(0,r.kt)("td",{parentName:"tr",align:null},"Specifies the user-agent string to be used in the HTTP request.")))),(0,r.kt)("p",null,"Note: The HTMLLoader class has related properties for settings pertaining to\ncontent loaded by an HTMLLoader object. For details, see\n",(0,r.kt)("a",{parentName:"p",href:"/docs/development/html-content-in-air/programming-html-and-javascript-in-air/about-the-htmlloader-class"},"About the HTMLLoader class"),"."),(0,r.kt)("h3",{id:"setting-urlrequest-defaults-air-only"},"Setting URLRequest defaults (AIR only)"),(0,r.kt)("p",null,"The URLRequestDefaults class lets you define application-specific default\nsettings for URLRequest objects. For example, the following code sets the\ndefault values for the ",(0,r.kt)("inlineCode",{parentName:"p"},"manageCookies")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"useCache")," properties. All new\nURLRequest objects will use the specified values for these properties instead of\nthe normal defaults:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"URLRequestDefaults.manageCookies = false;\nURLRequestDefaults.useCache = false;\n")),(0,r.kt)("p",null,"Note: The URLRequestDefaults class is defined for content running in Adobe AIR\nonly. It is not supported in Flash Player."),(0,r.kt)("p",null,"The URLRequestDefaults class includes a ",(0,r.kt)("inlineCode",{parentName:"p"},"setLoginCredentialsForHost()")," method\nthat lets you specify a default user name and password to use for a specific\nhost. The host, which is defined in the hostname parameter of the method, can be\na domain, such as ",(0,r.kt)("inlineCode",{parentName:"p"},'"www.example.com"'),", or a domain and a port number, such as\n",(0,r.kt)("inlineCode",{parentName:"p"},'"www.example.com:80"'),". Note that ",(0,r.kt)("inlineCode",{parentName:"p"},'"example.com"'),", ",(0,r.kt)("inlineCode",{parentName:"p"},'"www.example.com"'),", and\n",(0,r.kt)("inlineCode",{parentName:"p"},'"sales.example.com"')," are each considered unique hosts."),(0,r.kt)("p",null,"These credentials are only used if the server requires them. If the user has\nalready authenticated (for example, by using the authentication dialog box),\nthen calling the ",(0,r.kt)("inlineCode",{parentName:"p"},"setLoginCredentialsForHost()")," method does not change the\nauthenticated user."),(0,r.kt)("p",null,"The following code sets the default user name and password to use for requests\nsent to ",(0,r.kt)("a",{parentName:"p",href:"http://www.example.com"},"www.example.com"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'URLRequestDefaults.setLoginCredentialsForHost("www.example.com", "Ada", "love1816$X");\n')),(0,r.kt)("p",null,"The URLRequestDefaults settings only apply to the current application domain,\nwith one exception. The credentials passed to the ",(0,r.kt)("inlineCode",{parentName:"p"},"setLoginCredentialsForHost()"),"\nmethod are used for requests made in any application domain within the AIR\napplication."),(0,r.kt)("p",null,"For more information, see the\n",(0,r.kt)("a",{parentName:"p",href:"https://airsdk.dev/reference/actionscript/3.0/flash/net/URLRequestDefaults.html"},"URLRequestDefaults"),"\nclass listing in the\n",(0,r.kt)("a",{parentName:"p",href:"https://airsdk.dev/reference/actionscript/3.0/index.html"},"ActionScript 3.0 Reference for the Adobe Flash Platform"),"."),(0,r.kt)("h3",{id:"uri-schemes"},"URI schemes"),(0,r.kt)("p",null,"The standard URI schemes, such as the following, can be used in requests made\nfrom any security sandbox:"),(0,r.kt)("h4",{id:"http-and-https"},"http: and https:"),(0,r.kt)("p",null,"Use these for standard Internet URLs (in the same way that they are used in a\nweb browser)."),(0,r.kt)("h4",{id:"file"},"file:"),(0,r.kt)("p",null,"Use ",(0,r.kt)("inlineCode",{parentName:"p"},"file:")," to specify the URL of a file located on the local file system. For\nexample:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"file:///c:/AIR Test/test.txt\n")),(0,r.kt)("p",null,"In AIR, you can also use the following schemes when defining a URL for content\nrunning in the application security sandbox:"),(0,r.kt)("h4",{id:"app"},"app:"),(0,r.kt)("p",null,"Use ",(0,r.kt)("inlineCode",{parentName:"p"},"app:")," to specify a path relative to the root directory of the installed\napplication. For example, the following path points to a resources subdirectory\nof the directory of the installed application:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"app:/resources\n")),(0,r.kt)("p",null,"When an AIR application is launched using the AIR Debug Launcher (ADL), the\napplication directory is the directory that contains the application descriptor\nfile."),(0,r.kt)("p",null,"The URL (and ",(0,r.kt)("inlineCode",{parentName:"p"},"url")," property) for a File object created with\n",(0,r.kt)("inlineCode",{parentName:"p"},"File.applicationDirectory")," uses the ",(0,r.kt)("inlineCode",{parentName:"p"},"app")," URI scheme, as in the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'var dir:File = File.applicationDirectory;\ndir = dir.resolvePath("assets");\ntrace(dir.url); // app:/assets\n')),(0,r.kt)("h4",{id:"app-storage"},"app-storage:"),(0,r.kt)("p",null,"Use ",(0,r.kt)("inlineCode",{parentName:"p"},"app-storage:")," to specify a path relative to the data storage directory of\nthe application. For each installed application (and user), AIR creates a unique\napplication storage directory, which is a useful place to store data specific to\nthat application. For example, the following path points to a prefs.xml file in\na settings subdirectory of the application store directory:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"app-storage:/settings/prefs.xml\n")),(0,r.kt)("p",null,"The URL (and ",(0,r.kt)("inlineCode",{parentName:"p"},"url")," property) for a File object created with\n",(0,r.kt)("inlineCode",{parentName:"p"},"File.applicationStorageDirectory")," uses the ",(0,r.kt)("inlineCode",{parentName:"p"},"app-storage")," URI scheme, as in the\nfollowing:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'var prefsFile:File = File.applicationStorageDirectory;\nprefsFile = prefsFile.resolvePath("prefs.xml");\ntrace(dir.prefsFile); // app-storage:/prefs.xml\n')),(0,r.kt)("h4",{id:"mailto"},"mailto:"),(0,r.kt)("p",null,"You can use the mailto scheme in URLRequest objects passed to the\n",(0,r.kt)("inlineCode",{parentName:"p"},"navigateToURL()")," function. See\n",(0,r.kt)("a",{parentName:"p",href:"/docs/development/networking-and-communication/http-communications/opening-a-url-in-another-application"},"Opening a URL in another application"),"."),(0,r.kt)("p",null,"You can use a URLRequest object that uses any of these URI schemes to define the\nURL request for a number of different objects, such as a FileStream or a Sound\nobject. You can also use these schemes in HTML content running in AIR; for\nexample, you can use them in the ",(0,r.kt)("inlineCode",{parentName:"p"},"src")," attribute of an ",(0,r.kt)("inlineCode",{parentName:"p"},"img")," tag."),(0,r.kt)("p",null,"However, you can only use these AIR-specific URI schemes ( ",(0,r.kt)("inlineCode",{parentName:"p"},"app:")," and\n",(0,r.kt)("inlineCode",{parentName:"p"},"app-storage:"),") in content in the application security sandbox. For more\ninformation, see ",(0,r.kt)("a",{parentName:"p",href:"/docs/development/security/air-security/"},"AIR security"),"."),(0,r.kt)("h3",{id:"setting-url-variables"},"Setting URL variables"),(0,r.kt)("p",null,"While you can add variables to the URL string directly, it can be easier to use\nthe URLVariables class to define any variables needed for a request."),(0,r.kt)("p",null,"There are three ways in which you can add parameters to a URLVariables object:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Within the URLVariables constructor")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"With the ",(0,r.kt)("inlineCode",{parentName:"p"},"URLVariables.decode()")," method")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"As dynamic properties of the URLVariables object itself"))),(0,r.kt)("p",null,"The following example illustrates all three methods and also how to assign the\nvariables to a URLRequest object:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'var urlVar:URLVariables = new URLVariables( "one=1&two=2" );\nurlVar.decode("amp=" + encodeURIComponent( "&" ) );\nurlVar.three = 3;\nurlVar.amp2 = "&&";\ntrace(urlVar.toString()); //amp=%26&amp2=%26%26&one=1&two=2&three=3\n\nvar urlRequest:URLRequest = new URLRequest( "http://www.example.com/test.cfm" );\nurlRequest.data = urlVar;\n')),(0,r.kt)("p",null,"When you define variables within the URLVariables constructor or within the\n",(0,r.kt)("inlineCode",{parentName:"p"},"URLVariables.decode()")," method, make sure that you URL-encode the characters\nthat have a special meaning in a URI string. For example, when you use an\nampersand in a parameter name or value, you must encode the ampersand by\nchanging it from ",(0,r.kt)("inlineCode",{parentName:"p"},"&")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"%26")," because the ampersand acts as a delimiter for\nparameters. The top-level ",(0,r.kt)("inlineCode",{parentName:"p"},"encodeURIComponent()")," function can be used for this\npurpose."),(0,r.kt)("h2",{id:"using-the-urlloader-class"},"Using the URLLoader class"),(0,r.kt)("p",null,"The URLLoader class let you send a request to a server and access the\ninformation returned. You can also use the URLLoader class to access files on\nthe local file system in contexts where local file access is permitted (such as\nthe Flash Player local-with-filesystem sandbox and the AIR application sandbox).\nThe URLLoader class downloads data from a URL as text, binary data, or\nURL-encoded variables. The URLLoader class dispatches events such as ",(0,r.kt)("inlineCode",{parentName:"p"},"complete"),",\n",(0,r.kt)("inlineCode",{parentName:"p"},"httpStatus"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"ioError"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"open"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"progress"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"securityError"),"."),(0,r.kt)("p",null,"The ActionScript 3.0 event-handling model is significantly different than the\nActionScript 2.0 model, which used the ",(0,r.kt)("inlineCode",{parentName:"p"},"LoadVars.onData"),",\n",(0,r.kt)("inlineCode",{parentName:"p"},"LoadVars.onHTTPStatus"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"LoadVars.onLoad")," event handlers. For more\ninformation on handling events in ActionScript 3.0, see\n",(0,r.kt)("a",{parentName:"p",href:"/docs/development/core-actionscript-classes/handling-events/"},"Handling events")),(0,r.kt)("p",null,"Downloaded data is not available until the download has completed. You can\nmonitor the progress of the download (bytes loaded and bytes total) by listening\nfor the ",(0,r.kt)("inlineCode",{parentName:"p"},"progress")," event to be dispatched. However, if a file loads quickly\nenough a ",(0,r.kt)("inlineCode",{parentName:"p"},"progress")," event might not be dispatched. When a file has successfully\ndownloaded, the ",(0,r.kt)("inlineCode",{parentName:"p"},"complete")," event is dispatched. By setting the URLLoader\n",(0,r.kt)("inlineCode",{parentName:"p"},"dataFormat")," property, you can receive the data as text, raw binary data, or as\na URLVariables object."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"URLLoader.load()")," method (and optionally the URLLoader class's constructor)\ntakes a single parameter, ",(0,r.kt)("inlineCode",{parentName:"p"},"request"),", which is a URLRequest object. A URLRequest\nobject contains all of the information for a single HTTP request, such as the\ntarget URL, request method ( ",(0,r.kt)("inlineCode",{parentName:"p"},"GET")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"POST"),"), additional header information,\nand the MIME type."),(0,r.kt)("p",null,"For example, to upload an XML packet to a server-side script, you could use the\nfollowing code:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'var secondsUTC:Number = new Date().time;\nvar dataXML:XML =\n    <clock>\n        <time>{secondsUTC}</time>\n    </clock>;\nvar request:URLRequest = new URLRequest("http://www.yourdomain.com/time.cfm");\nrequest.contentType = "text/xml";\nrequest.data = dataXML.toXMLString();\nrequest.method = URLRequestMethod.POST;\nvar loader:URLLoader = new URLLoader();\nloader.load(request);\n')),(0,r.kt)("p",null,"The previous snippet creates an XML document named ",(0,r.kt)("inlineCode",{parentName:"p"},"dataXML")," that contains the\nXML packet to be sent to the server. The example sets the URLRequest\n",(0,r.kt)("inlineCode",{parentName:"p"},"contentType")," property to ",(0,r.kt)("inlineCode",{parentName:"p"},'"text/xml"')," and assigns the XML document to the\nURLRequest ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," property. Finally, the example creates a URLLoader object and\nsends the request to the remote script by using the ",(0,r.kt)("inlineCode",{parentName:"p"},"load()")," method."),(0,r.kt)("h2",{id:"using-the-urlstream-class"},"Using the URLStream class"),(0,r.kt)("p",null,"The URLStream class provides access to the downloading data as the data arrives.\nThe URLStream class also lets you close a stream before it finishes downloading.\nThe downloaded data is available as raw binary data."),(0,r.kt)("p",null,"When reading data from a URLStream object, use the ",(0,r.kt)("inlineCode",{parentName:"p"},"bytesAvailable")," property to\ndetermine whether sufficient data is available before reading it. An EOFError\nexception is thrown if you attempt to read more data than is available."),(0,r.kt)("h4",{id:"the-httpresponsestatus-event-air"},"The httpResponseStatus event (AIR)"),(0,r.kt)("p",null,"In Adobe AIR, the URLStream class dispatches an ",(0,r.kt)("inlineCode",{parentName:"p"},"httpResponseStatus")," event in\naddition to the ",(0,r.kt)("inlineCode",{parentName:"p"},"httpStatus")," event. The ",(0,r.kt)("inlineCode",{parentName:"p"},"httpResponseStatus")," event is delivered\nbefore any response data. The ",(0,r.kt)("inlineCode",{parentName:"p"},"httpResponseStatus")," event (represented by the\nHTTPStatusEvent class) includes a ",(0,r.kt)("inlineCode",{parentName:"p"},"responseURL")," property, which is the URL that\nthe response was returned from, and a ",(0,r.kt)("inlineCode",{parentName:"p"},"responseHeaders")," property, which is an\narray of URLRequestHeader objects representing the response headers that the\nresponse returned."),(0,r.kt)("h2",{id:"loading-data-from-external-documents"},"Loading data from external documents"),(0,r.kt)("p",null,'When you build dynamic applications, it can be useful to load data from external\nfiles or from server-side scripts. This lets you build dynamic applications\nwithout having to edit or recompile your application. For example, if you build\na "tip of the day" application, you can write a server-side script that\nretrieves a random tip from a database and saves it to a text file once a day.\nThen your application can load the contents of a static text file instead of\nquerying the database each time.'),(0,r.kt)("p",null,"The following snippet creates a URLRequest and URLLoader object, which loads the\ncontents of an external text file, params.txt:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'var request:URLRequest = new URLRequest("params.txt");\nvar loader:URLLoader = new URLLoader();\nloader.load(request);\n')),(0,r.kt)("p",null,"By default, if you do not define a request method, Flash Player and Adobe AIR\nload the content using the HTTP ",(0,r.kt)("inlineCode",{parentName:"p"},"GET")," method. To send the request using the\n",(0,r.kt)("inlineCode",{parentName:"p"},"POST")," method, set the ",(0,r.kt)("inlineCode",{parentName:"p"},"request.method")," property to ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")," using the static\nconstant ",(0,r.kt)("inlineCode",{parentName:"p"},"URLRequestMethod.POST"),", as the following code shows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'var request:URLRequest = new URLRequest("sendfeedback.cfm");\nrequest.method = URLRequestMethod.POST;\n')),(0,r.kt)("p",null,"The external document, params.txt, that is loaded at run time contains the\nfollowing data:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"monthNames=January,February,March,April,May,June,July,August,September,October,November,December&dayNames=Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday\n")),(0,r.kt)("p",null,"The file contains two parameters, ",(0,r.kt)("inlineCode",{parentName:"p"},"monthNames")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"dayNames"),". Each parameter\ncontains a comma-separated list that is parsed as strings. You can split this\nlist into an array using the ",(0,r.kt)("inlineCode",{parentName:"p"},"String.split()")," method."),(0,r.kt)("p",null,(0,r.kt)("img",{src:a(39683).Z,width:"17",height:"21"})," Avoid using reserved words or language constructs as\nvariable names in external data files, because doing so makes reading and\ndebugging your code more difficult."),(0,r.kt)("p",null,"Once the data has loaded, the ",(0,r.kt)("inlineCode",{parentName:"p"},"complete")," event is dispatched, and the contents\nof the external document are available to use in the URLLoader's ",(0,r.kt)("inlineCode",{parentName:"p"},"data"),"\nproperty, as the following code shows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"function completeHandler(event)\n{\n    var loader2 = event.target;\n    air.trace(loader2.data);\n}\n")),(0,r.kt)("p",null,"If the remote document contains name-value pairs, you can parse the data using\nthe URLVariables class by passing in the contents of the loaded file, as\nfollows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"private function completeHandler(event:Event):void\n{\n    var loader2:URLLoader = URLLoader(event.target);\n    var variables:URLVariables = new URLVariables(loader2.data);\n    trace(variables.dayNames);\n}\n")),(0,r.kt)("p",null,"Each name-value pair from the external file is created as a property in the\nURLVariables object. Each property within the variables object in the previous\ncode sample is treated as a string. If the value of the name-value pair is a\nlist of items, you can convert the string into an array by calling the\n",(0,r.kt)("inlineCode",{parentName:"p"},"String.split()")," method, as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'var dayNameArray:Array = variables.dayNames.split(",");\n')),(0,r.kt)("p",null,(0,r.kt)("img",{src:a(39683).Z,width:"17",height:"21"})," If you are loading numeric data from external text\nfiles, convert the values into numeric values by using a top-level function,\nsuch as ",(0,r.kt)("inlineCode",{parentName:"p"},"int()"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"uint()"),", or ",(0,r.kt)("inlineCode",{parentName:"p"},"Number()")," ",(0,r.kt)("em",{parentName:"p"},".")),(0,r.kt)("p",null,"Instead of loading the contents of the remote file as a string and creating a\nnew URLVariables object, you could instead set the ",(0,r.kt)("inlineCode",{parentName:"p"},"URLLoader.dataFormat"),"\nproperty to one of the static properties found in the URLLoaderDataFormat class.\nThe three possible values for the ",(0,r.kt)("inlineCode",{parentName:"p"},"URLLoader.dataFormat")," property are as\nfollows:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"URLLoaderDataFormat.BINARY")," \u2014The ",(0,r.kt)("inlineCode",{parentName:"p"},"URLLoader.data")," property will contain\nbinary data stored in a ByteArray object.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"URLLoaderDataFormat.TEXT")," \u2014The ",(0,r.kt)("inlineCode",{parentName:"p"},"URLLoader.data")," property will contain text in\na String object.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"URLLoaderDataFormat.VARIABLES")," \u2014The ",(0,r.kt)("inlineCode",{parentName:"p"},"URLLoader.data")," property will contain\nURL-encoded variables stored in a URLVariables object."))),(0,r.kt)("p",null,"The following code demonstrates how setting the ",(0,r.kt)("inlineCode",{parentName:"p"},"URLLoader.dataFormat")," property\nto ",(0,r.kt)("inlineCode",{parentName:"p"},"URLLoaderDataFormat.VARIABLES")," allows you to automatically parse loaded data\ninto a URLVariables object:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'package\n{\n    import flash.display.Sprite;\n    import flash.events.*;\n    import flash.net.URLLoader;\n    import flash.net.URLLoaderDataFormat;\n    import flash.net.URLRequest;\n\n    public class URLLoaderDataFormatExample extends Sprite\n    {\n        public function URLLoaderDataFormatExample()\n        {\n            var request:URLRequest = new URLRequest("http://www.[yourdomain].com/params.txt");\n            var variables:URLLoader = new URLLoader();\n            variables.dataFormat = URLLoaderDataFormat.VARIABLES;\n            variables.addEventListener(Event.COMPLETE, completeHandler);\n            try\n            {\n                variables.load(request);\n            }\n            catch (error:Error)\n            {\n                trace("Unable to load URL: " + error);\n            }\n        }\n        private function completeHandler(event:Event):void\n        {\n            var loader:URLLoader = URLLoader(event.target);\n            trace(loader.data.dayNames);\n        }\n    }\n}\n')),(0,r.kt)("p",null,"Note: The default value for ",(0,r.kt)("inlineCode",{parentName:"p"},"URLLoader.dataFormat")," is\n",(0,r.kt)("inlineCode",{parentName:"p"},"URLLoaderDataFormat.TEXT"),"."),(0,r.kt)("p",null,"As the following example shows, loading XML from an external file is the same as\nloading URLVariables. You can create a URLRequest instance and a URLLoader\ninstance and use them to download a remote XML document. When the file has\ncompletely downloaded, the ",(0,r.kt)("inlineCode",{parentName:"p"},"Event.COMPLETE")," event is dispatched and the contents\nof the external file are converted to an XML instance, which you can parse using\nXML methods and properties."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'package\n{\n    import flash.display.Sprite;\n    import flash.errors.*;\n    import flash.events.*;\n    import flash.net.URLLoader;\n    import flash.net.URLRequest;\n\n    public class ExternalDocs extends Sprite\n    {\n        public function ExternalDocs()\n        {\n            var request:URLRequest = new URLRequest("http://www.[yourdomain].com/data.xml");\n            var loader:URLLoader = new URLLoader();\n            loader.addEventListener(Event.COMPLETE, completeHandler);\n            try\n            {\n                loader.load(request);\n            }\n            catch (error:ArgumentError)\n            {\n                trace("An ArgumentError has occurred.");\n            }\n            catch (error:SecurityError)\n            {\n                trace("A SecurityError has occurred.");\n            }\n        }\n        private function completeHandler(event:Event):void\n        {\n            var dataXML:XML = XML(event.target.data);\n            trace(dataXML.toXMLString());\n        }\n    }\n}\n')),(0,r.kt)("h2",{id:"communicating-with-external-scripts"},"Communicating with external scripts"),(0,r.kt)("p",null,"In addition to loading external data files, you can also use the URLVariables\nclass to send variables to a server-side script and process the server's\nresponse. This is useful, for example, if you are programming a game and want to\nsend the user's score to a server to calculate whether it should be added to the\nhigh scores list, or even send a user's login information to a server for\nvalidation. A server-side script can process the user name and password,\nvalidate it against a database, and return confirmation of whether the\nuser-supplied credentials are valid."),(0,r.kt)("p",null,"The following snippet creates a URLVariables object named ",(0,r.kt)("inlineCode",{parentName:"p"},"variables,")," which\ncreates a new variable called ",(0,r.kt)("inlineCode",{parentName:"p"},"name"),". Next, a URLRequest object is created that\nspecifies the URL of the server-side script to send the variables to. Then you\nset the ",(0,r.kt)("inlineCode",{parentName:"p"},"method")," property of the URLRequest object to send the variables as an\nHTTP ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")," request. To add the URLVariables object to the URL request, you set\nthe ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," property of the URLRequest object to the URLVariables object created\nearlier. Finally, the URLLoader instance is created and the ",(0,r.kt)("inlineCode",{parentName:"p"},"URLLoader.load()"),"\nmethod is invoked, which initiates the request."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'var variables:URLVariables = new URLVariables("name=Franklin");\nvar request:URLRequest = new URLRequest();\nrequest.url = "http://www.[yourdomain].com/greeting.cfm";\nrequest.method = URLRequestMethod.POST;\nrequest.data = variables;\nvar loader:URLLoader = new URLLoader();\nloader.dataFormat = URLLoaderDataFormat.VARIABLES;\nloader.addEventListener(Event.COMPLETE, completeHandler);\ntry\n{\n    loader.load(request);\n}\ncatch (error:Error)\n{\n    trace("Unable to load URL");\n}\n\nfunction completeHandler(event:Event):void\n{\n    trace(event.target.data.welcomeMessage);\n}\n')),(0,r.kt)("p",null,"The following code contains the contents of the Adobe ColdFusion\xae greeting.cfm\ndocument used in the previous example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'<cfif NOT IsDefined("Form.name") OR Len(Trim(Form.Name)) EQ 0>\n    <cfset Form.Name = "Stranger" />\n</cfif>\n<cfoutput>welcomeMessage=#UrlEncodedFormat("Welcome, " & Form.name)#\n</cfoutput>\n')))}u.isMDXComponent=!0},39683:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/tip_help-3d4c326bf05518d713f5bf1c3f47bcde.png"}}]);