"use strict";(self.webpackChunkairsdk_dev=self.webpackChunkairsdk_dev||[]).push([[10789],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>m});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=a.createContext({}),p=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=p(e.components);return a.createElement(i.Provider,{value:t},e.children)},u="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,i=e.parentName,s=d(e,["components","mdxType","originalType","parentName"]),u=p(n),c=r,m=u["".concat(i,".").concat(c)]||u[c]||h[c]||l;return n?a.createElement(m,o(o({ref:t},s),{},{components:n})):a.createElement(m,o({ref:t},s))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=c;var d={};for(var i in t)hasOwnProperty.call(t,i)&&(d[i]=t[i]);d.originalType=e,d[u]="string"==typeof e?e:r,o[1]=d;for(var p=2;p<l;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},38005:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>d,toc:()=>p});var a=n(87462),r=(n(67294),n(3905));const l={sidebar_position:4},o="Drag and drop in HTML",d={unversionedId:"development/user-interaction/drag-and-drop-in-air/drag-and-drop-in-html",id:"development/user-interaction/drag-and-drop-in-air/drag-and-drop-in-html",title:"Drag and drop in HTML",description:"To drag data into and out of an HTML-based application (or into and out of the",source:"@site/docs/development/user-interaction/drag-and-drop-in-air/drag-and-drop-in-html.md",sourceDirName:"development/user-interaction/drag-and-drop-in-air",slug:"/development/user-interaction/drag-and-drop-in-air/drag-and-drop-in-html",permalink:"/docs/development/user-interaction/drag-and-drop-in-air/drag-and-drop-in-html",draft:!1,editUrl:"https://github.com/airsdk/airsdk.dev/edit/main/docs/development/user-interaction/drag-and-drop-in-air/drag-and-drop-in-html.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"mainSidebar",previous:{title:"Supporting the drag-in gesture",permalink:"/docs/development/user-interaction/drag-and-drop-in-air/supporting-the-drag-in-gesture"},next:{title:"Dragging data out of an HTML element",permalink:"/docs/development/user-interaction/drag-and-drop-in-air/dragging-data-out-of-an-html-element"}},i={},p=[{value:"Default drag-and-drop behavior",id:"default-drag-and-drop-behavior",level:2},{value:"Drag-and-drop events in HTML",id:"drag-and-drop-events-in-html",level:2},{value:"MIME types for the HTML drag-and-drop",id:"mime-types-for-the-html-drag-and-drop",level:2},{value:"Drag effects in HTML",id:"drag-effects-in-html",level:2}],s={toc:p},u="wrapper";function h(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"drag-and-drop-in-html"},"Drag and drop in HTML"),(0,r.kt)("p",null,"To drag data into and out of an HTML-based application (or into and out of the\nHTML displayed in an HTMLLoader), you can use HTML drag and drop events. The\nHTML drag-and-drop API allows you to drag to and from DOM elements in the HTML\ncontent."),(0,r.kt)("p",null,"Note: You can also use the AIR NativeDragEvent and NativeDragManager APIs by\nlistening for events on the HTMLLoader object containing the HTML content.\nHowever, the HTML API is better integrated with the HTML DOM and gives you\ncontrol of the default behavior."),(0,r.kt)("h2",{id:"default-drag-and-drop-behavior"},"Default drag-and-drop behavior"),(0,r.kt)("p",null,"The HTML environment provides default behavior for drag-and-drop gestures\ninvolving text, images, and URLs. Using the default behavior, you can always\ndrag these types of data out of an element. However, you can only drag text into\nan element and only to elements in an editable region of a page. When you drag\ntext between or within editable regions of a page, the default behavior performs\na move action. When you drag text to an editable region from a non-editable\nregion or from outside the application, then the default behavior performs a\ncopy action."),(0,r.kt)("p",null,"You can override the default behavior by handling the drag-and-drop events\nyourself. To cancel the default behavior, you must call the ",(0,r.kt)("inlineCode",{parentName:"p"},"preventDefault()"),"\nmethods of the objects dispatched for the drag-and-drop events. You can then\ninsert data into the drop target and remove data from the drag source as\nnecessary to perform the chosen action."),(0,r.kt)("p",null,"By default, the user can select and drag any text, and drag images and links.\nYou can use the WebKit CSS property, ",(0,r.kt)("inlineCode",{parentName:"p"},"-webkit-user-select")," to control how any\nHTML element can be selected. For example, if you set ",(0,r.kt)("inlineCode",{parentName:"p"},"-webkit-user-select")," to\n",(0,r.kt)("inlineCode",{parentName:"p"},"none"),", then the element contents are not selectable and so cannot be dragged.\nYou can also use the ",(0,r.kt)("inlineCode",{parentName:"p"},"-webkit-user-drag")," CSS property to control whether an\nelement as a whole can be dragged. However, the contents of the element are\ntreated separately. The user could still drag a selected portion of the text.\nFor more information, see\n",(0,r.kt)("a",{parentName:"p",href:"/docs/development/html-content-in-air/about-the-html-environment/css-in-air"},"CSS in AIR"),"."),(0,r.kt)("h2",{id:"drag-and-drop-events-in-html"},"Drag-and-drop events in HTML"),(0,r.kt)("p",null,"The events dispatched by the initiator element from which a drag originates,\nare:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Event"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dragstart"),(0,r.kt)("td",{parentName:"tr",align:null},"Dispatched when the user starts the drag gesture. The handler for this event can prevent the drag, if necessary, by calling the preventDefault() method of the event object. To control whether the dragged data can be copied, linked, or moved, set the effectAllowed property. Selected text, images, and links are put onto the clipboard by the default behavior, but you can set different data for the drag gesture using the dataTransfer property of the event object.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"drag"),(0,r.kt)("td",{parentName:"tr",align:null},"Dispatched continuously during the drag gesture.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dragend"),(0,r.kt)("td",{parentName:"tr",align:null},"Dispatched when the user releases the mouse button to end the drag gesture.")))),(0,r.kt)("p",null,"The events dispatched by a drag target are:"),(0,r.kt)("table",null,(0,r.kt)("thead",null,(0,r.kt)("tr",null,(0,r.kt)("th",null,(0,r.kt)("p",null,"Event")),(0,r.kt)("th",null,(0,r.kt)("p",null,"Description")))),(0,r.kt)("tbody",null,(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("p",null,"dragover")),(0,r.kt)("td",null,(0,r.kt)("p",null,"Dispatched continuously while the drag gesture remains within the element boundaries. The handler for this event should set the dataTransfer.dropEffect property to indicate whether the drop will result in a copy, move, or link action if the user releases the mouse."))),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("p",null,"dragenter")),(0,r.kt)("td",null,(0,r.kt)("p",null,"Dispatched when the drag gesture enters the boundaries of the element."),(0,r.kt)("p",null,"If you change any properties of a dataTransfer object in a dragenter event handler, those changes are quickly overridden by the next dragover event. On the other hand, there is a short delay between a dragenter and the first dragover event that can cause the cursor to flash if different properties are set. In many cases, you can use the same event handler for both events."))),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("p",null,"dragleave")),(0,r.kt)("td",null,(0,r.kt)("p",null,"Dispatched when the drag gesture leaves the element boundaries."))),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("p",null,"drop")),(0,r.kt)("td",null,(0,r.kt)("p",null,"Dispatched when the user drops the data onto the element. The data being dragged can only be accessed within the handler for this event."))))),(0,r.kt)("p",null,"The event object dispatched in response to these events is similar to a mouse\nevent. You can use mouse event properties such as ( ",(0,r.kt)("inlineCode",{parentName:"p"},"clientX"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"clientY"),") and (\n",(0,r.kt)("inlineCode",{parentName:"p"},"screenX"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"screenY"),"), to determine the mouse position."),(0,r.kt)("p",null,"The most important property of a drag event object is ",(0,r.kt)("inlineCode",{parentName:"p"},"dataTransfer"),", which\ncontains the data being dragged. The ",(0,r.kt)("inlineCode",{parentName:"p"},"dataTransfer")," object itself has the\nfollowing properties and methods:"),(0,r.kt)("table",null,(0,r.kt)("thead",null,(0,r.kt)("tr",null,(0,r.kt)("th",null,(0,r.kt)("p",null,"Property or Method")),(0,r.kt)("th",null,(0,r.kt)("p",null,"Description")))),(0,r.kt)("tbody",null,(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("p",null,"effectAllowed")),(0,r.kt)("td",null,(0,r.kt)("p",null,"The effect allowed by the source of the drag. Typically, the handler for the dragstart event sets this value. See ",(0,r.kt)("a",{href:"#drag-effects-in-html"},"Drag effects in HTML"),"."))),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("p",null,"dropEffect")),(0,r.kt)("td",null,(0,r.kt)("p",null,"The effect chosen by the target or the user. If you set the ",(0,r.kt)("samp",null,"dropEffect")," in a ",(0,r.kt)("samp",null,"dragover")," or ",(0,r.kt)("samp",null,"dragenter")," event handler, then AIR updates the mouse cursor to indicate the effect that occurs if the user releases the mouse. If the ",(0,r.kt)("samp",null,"dropEffect")," set does not match one of the allowed effects, no drop is allowed and the ",(0,r.kt)("em",null,"unavailable")," cursor is displayed. If you have not set a ",(0,r.kt)("samp",null,"dropEffect")," in response to the latest ",(0,r.kt)("samp",null,"dragover")," or ",(0,r.kt)("samp",null,"dragenter")," event, then the user can choose from the allowed effects with the standard operating system modifier keys."),(0,r.kt)("p",null,"The final effect is reported by the ",(0,r.kt)("samp",null,"dropEffect")," property of the object dispatched for ",(0,r.kt)("samp",null,"dragend"),". If the user abandons the drop by releasing the mouse outside an eligible target, then ",(0,r.kt)("samp",null,"dropEffect")," is set to ",(0,r.kt)("samp",null,"none"),"."))),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("p",null,"types")),(0,r.kt)("td",null,(0,r.kt)("p",null,"An array containing the MIME type strings for each data format present in the ",(0,r.kt)("samp",null,"dataTransfer")," object."))),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("p",null,"getData(mimeType)")),(0,r.kt)("td",null,(0,r.kt)("p",null,"Gets the data in the format specified by the ",(0,r.kt)("samp",null,"mimeType")," parameter."),(0,r.kt)("p",null,"The ",(0,r.kt)("samp",null,"getData()")," method can only be called in response to the ",(0,r.kt)("samp",null,"drop")," event."))),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("p",null,"setData(mimeType)")),(0,r.kt)("td",null,(0,r.kt)("p",null,"Adds data to the ",(0,r.kt)("samp",null,"dataTransfer")," in the format specified by the mimeType parameter. You can add data in multiple formats by calling ",(0,r.kt)("samp",null,"setData()")," for each MIME type. Any data placed in the ",(0,r.kt)("samp",null,"dataTransfer")," object by the default drag behavior is cleared."),(0,r.kt)("p",null,"The ",(0,r.kt)("samp",null,"setData()")," method can only be called in response to the ",(0,r.kt)("samp",null,"dragstart")," event."))),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("p",null,"clearData(mimeType)")),(0,r.kt)("td",null,(0,r.kt)("p",null,"Clears any data in the format specified by the ",(0,r.kt)("samp",null,"mimeType")," parameter."))),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("p",null,"setDragImage(image, offsetX, offsetY)")),(0,r.kt)("td",null,(0,r.kt)("p",null,"Sets a custom drag image. The ",(0,r.kt)("samp",null,"setDragImage()")," method can only be called in response to the dragstart event and only when an entire HTML element is dragged by setting its ",(0,r.kt)("samp",null,"-webkit-user-drag")," CSS style to ",(0,r.kt)("samp",null,"element"),". The ",(0,r.kt)("samp",null,"image")," parameter can be a JavaScript Element or Image object."))))),(0,r.kt)("h2",{id:"mime-types-for-the-html-drag-and-drop"},"MIME types for the HTML drag-and-drop"),(0,r.kt)("p",null,"The MIME types to use with the ",(0,r.kt)("inlineCode",{parentName:"p"},"dataTransfer")," object of an HTML drag-and-drop\nevent include:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Data format"),(0,r.kt)("th",{parentName:"tr",align:null},"MIME type"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Text"),(0,r.kt)("td",{parentName:"tr",align:null},'"text/plain"')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"HTML"),(0,r.kt)("td",{parentName:"tr",align:null},'"text/html"')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"URL"),(0,r.kt)("td",{parentName:"tr",align:null},'"text/uri-list"')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Bitmap"),(0,r.kt)("td",{parentName:"tr",align:null},'"image/x-vnd.adobe.air.bitmap"')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"File list"),(0,r.kt)("td",{parentName:"tr",align:null},'"application/x-vnd.adobe.air.file-list"')))),(0,r.kt)("p",null,"You can also use other MIME strings, including application-defined strings.\nHowever, other applications may not be able to recognize or use the transferred\ndata. It is your responsibility to add data to the ",(0,r.kt)("inlineCode",{parentName:"p"},"dataTransfer")," object in the\nexpected format."),(0,r.kt)("p",null,"Important: Only code running in the application sandbox can access dropped\nfiles. Attempting to read or set any property of a File object within a\nnon-application sandbox generates a security error. See\n",(0,r.kt)("a",{parentName:"p",href:"/docs/development/user-interaction/drag-and-drop-in-air/handling-file-drops-in-non-application-html-sandboxes"},"Handling file drops in non-application HTML sandboxes"),"\nfor more information."),(0,r.kt)("h2",{id:"drag-effects-in-html"},"Drag effects in HTML"),(0,r.kt)("p",null,"The initiator of the drag gesture can limit the allowed drag effects by setting\nthe ",(0,r.kt)("inlineCode",{parentName:"p"},"dataTransfer.effectAllowed")," property in the handler for the ",(0,r.kt)("inlineCode",{parentName:"p"},"dragstart"),"\nevent. The following string values can be used:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"String value"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},'"none"'),(0,r.kt)("td",{parentName:"tr",align:null},"No drag operations are allowed.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},'"copy"'),(0,r.kt)("td",{parentName:"tr",align:null},"The data will be copied to the destination, leaving the original in place.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},'"link"'),(0,r.kt)("td",{parentName:"tr",align:null},"The data will be shared with the drop destination using a link back to the original.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},'"move"'),(0,r.kt)("td",{parentName:"tr",align:null},"The data will be copied to the destination and removed from the original location.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},'"copyLink"'),(0,r.kt)("td",{parentName:"tr",align:null},"The data can be copied or linked.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},'"copyMove"'),(0,r.kt)("td",{parentName:"tr",align:null},"The data can be copied or moved.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},'"linkMove"'),(0,r.kt)("td",{parentName:"tr",align:null},"The data can be linked or moved.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},'"all"'),(0,r.kt)("td",{parentName:"tr",align:null},"The data can be copied, moved, or linked. ",(0,r.kt)("em",{parentName:"td"},"All")," is the default effect when you prevent the default behavior.")))),(0,r.kt)("p",null,"The target of the drag gesture can set the ",(0,r.kt)("inlineCode",{parentName:"p"},"dataTransfer.dropEffect")," property to\nindicate the action that is taken if the user completes the drop. If the drop\neffect is one of the allowed actions, then the system displays the appropriate\ncopy, move, or link cursor. If not, then the system displays the ",(0,r.kt)("em",{parentName:"p"},"unavailable"),"\ncursor. If no drop effect is set by the target, the user can choose from the\nallowed actions with the modifier keys."),(0,r.kt)("p",null,"Set the ",(0,r.kt)("inlineCode",{parentName:"p"},"dropEffect")," value in the handlers for both the ",(0,r.kt)("inlineCode",{parentName:"p"},"dragover")," and\n",(0,r.kt)("inlineCode",{parentName:"p"},"dragenter")," events:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'function doDragStart(event) {\n    event.dataTransfer.setData("text/plain","Text to drag");\n    event.dataTransfer.effectAllowed = "copyMove";\n}\n\nfunction doDragOver(event) {\n    event.dataTransfer.dropEffect = "copy";\n}\n\nfunction doDragEnter(event) {\n    event.dataTransfer.dropEffect = "copy";\n}\n')),(0,r.kt)("p",null,"Note: Although you should always set the ",(0,r.kt)("inlineCode",{parentName:"p"},"dropEffect")," property in the handler\nfor ",(0,r.kt)("inlineCode",{parentName:"p"},"dragenter"),", be aware that the next ",(0,r.kt)("inlineCode",{parentName:"p"},"dragover")," event resets the property to\nits default value. Set ",(0,r.kt)("inlineCode",{parentName:"p"},"dropEffect")," in response to both events."))}h.isMDXComponent=!0}}]);