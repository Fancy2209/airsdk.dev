"use strict";(self.webpackChunkairsdk_dev=self.webpackChunkairsdk_dev||[]).push([[5598],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>u});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),d=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},s=function(e){var t=d(e.components);return a.createElement(l.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),c=d(n),h=o,u=c["".concat(l,".").concat(h)]||c[h]||m[h]||i;return n?a.createElement(u,r(r({ref:t},s),{},{components:n})):a.createElement(u,r({ref:t},s))}));function u(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=h;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p[c]="string"==typeof e?e:o,r[1]=p;for(var d=2;d<i;d++)r[d]=n[d];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},13984:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>m,frontMatter:()=>i,metadata:()=>p,toc:()=>d});var a=n(87462),o=(n(67294),n(3905));const i={},r="JavaScript in AIR",p={unversionedId:"development/html-content-in-air/about-the-html-environment/javascript-in-air",id:"development/html-content-in-air/about-the-html-environment/javascript-in-air",title:"JavaScript in AIR",description:"AIR makes several changes to the typical behavior of common JavaScript objects.",source:"@site/docs/development/html-content-in-air/about-the-html-environment/javascript-in-air.md",sourceDirName:"development/html-content-in-air/about-the-html-environment",slug:"/development/html-content-in-air/about-the-html-environment/javascript-in-air",permalink:"/docs/development/html-content-in-air/about-the-html-environment/javascript-in-air",draft:!1,editUrl:"https://github.com/airsdk/airsdk.dev/edit/main/docs/development/html-content-in-air/about-the-html-environment/javascript-in-air.md",tags:[],version:"current",frontMatter:{},sidebar:"mainSidebar",previous:{title:"HTML in AIR",permalink:"/docs/development/html-content-in-air/about-the-html-environment/html-in-air"},next:{title:"Overview of the HTML environment",permalink:"/docs/development/html-content-in-air/about-the-html-environment/overview-of-the-html-environment"}},l={},d=[{value:"HTML Sandboxes",id:"html-sandboxes",level:2},{value:"JavaScript eval() function",id:"javascript-eval-function",level:2},{value:"Function constructors",id:"function-constructors",level:2},{value:"Loading external scripts",id:"loading-external-scripts",level:2},{value:"The XMLHttpRequest object",id:"the-xmlhttprequest-object",level:2},{value:"Cookies",id:"cookies",level:2},{value:"The Clipboard object",id:"the-clipboard-object",level:2},{value:"Drag and Drop",id:"drag-and-drop",level:2},{value:"innerHTML and outerHTML properties",id:"innerhtml-and-outerhtml-properties",level:2},{value:"Document.write() and Document.writeln() methods",id:"documentwrite-and-documentwriteln-methods",level:2},{value:"Document.designMode property",id:"documentdesignmode-property",level:2},{value:"unload events (for body and frameset objects)",id:"unload-events-for-body-and-frameset-objects",level:2},{value:"JavaScript Window object",id:"javascript-window-object",level:2},{value:"air.NativeApplication object",id:"airnativeapplication-object",level:2},{value:"The JavaScript URL scheme",id:"the-javascript-url-scheme",level:2}],s={toc:d},c="wrapper";function m(e){let{components:t,...n}=e;return(0,o.kt)(c,(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"javascript-in-air"},"JavaScript in AIR"),(0,o.kt)("p",null,"AIR makes several changes to the typical behavior of common JavaScript objects.\nMany of these changes are made to make it easier to write secure applications in\nAIR. At the same time, these differences in behavior mean that some common\nJavaScript coding patterns, and existing web applications using those patterns,\nmight not always execute as expected in AIR. For information on correcting these\ntypes of issues, see\n",(0,o.kt)("a",{parentName:"p",href:"/docs/development/html-content-in-air/programming-html-and-javascript-in-air/avoiding-security-related-javascript-errors"},"Avoiding security-related JavaScript errors"),"."),(0,o.kt)("h2",{id:"html-sandboxes"},"HTML Sandboxes"),(0,o.kt)("p",null,"AIR places content into isolated sandboxes according to the origin of the\ncontent. The sandbox rules are consistent with the same-origin policy\nimplemented by most web browsers, as well as the rules for sandboxes implemented\nby the Adobe Flash Player. In addition, AIR provides a new ",(0,o.kt)("em",{parentName:"p"},"application")," sandbox\ntype to contain and protect application content. See\n",(0,o.kt)("a",{parentName:"p",href:"/docs/development/security/security-sandboxes"},"Security sandboxes")," for more information\non the types of sandboxes you may encounter when developing AIR applications."),(0,o.kt)("p",null,"Access to the run-time environment and AIR APIs are only available to HTML and\nJavaScript running within the application sandbox. At the same time, however,\ndynamic evaluation and execution of JavaScript, in its various forms, is largely\nrestricted within the application sandbox for security reasons. These\nrestrictions are in place whether or not your application actually loads\ninformation directly from a server. (Even file content, pasted strings, and\ndirect user input may be untrustworthy.)"),(0,o.kt)("p",null,"The origin of the content in a page determines the sandbox to which it is\nconsigned. Only content loaded from the application directory (the installation\ndirectory referenced by the ",(0,o.kt)("inlineCode",{parentName:"p"},"app:")," URL scheme) is placed in the application\nsandbox. Content loaded from the file system is placed in the ",(0,o.kt)("em",{parentName:"p"},"local-with-file\nsystem")," or the ",(0,o.kt)("em",{parentName:"p"},"local-trusted")," sandbox, which allows access and interaction with\ncontent on the local file system, but not remote content. Content loaded from\nthe network is placed in a remote sandbox corresponding to its domain of origin."),(0,o.kt)("p",null,"To allow an application page to interact freely with content in a remote\nsandbox, the page can be mapped to the same domain as the remote content. For\nexample, if you write an application that displays map data from an Internet\nservice, the page of your application that loads and displays content from the\nservice could be mapped to the service domain. The attributes for mapping pages\ninto a remote sandbox and domain are new attributes added to the frame and\niframe HTML elements."),(0,o.kt)("p",null,"To allow content in a non-application sandbox to safely use AIR features, you\ncan set up a parent sandbox bridge. To allow application content to safely call\nmethods and access properties of content in other sandboxes, you can set up a\nchild sandbox bridge. Safety here means that remote content cannot accidentally\nget references to objects, properties, or methods that are not explicitly\nexposed. Only simple data types, functions, and anonymous objects can be passed\nacross the bridge. However, you must still avoid explicitly exposing potentially\ndangerous functions. If, for example, you exposed an interface that allowed\nremote content to read and write files anywhere on a user's system, then you\nmight be giving remote content the means to do considerable harm to your users."),(0,o.kt)("h2",{id:"javascript-eval-function"},"JavaScript eval() function"),(0,o.kt)("p",null,"Use of the ",(0,o.kt)("inlineCode",{parentName:"p"},"eval()")," function is restricted within the application sandbox once a\npage has finished loading. Some uses are permitted so that JSON-formatted data\ncan be safely parsed, but any evaluation that results in executable statements\nresults in an error.\n",(0,o.kt)("a",{parentName:"p",href:"/docs/development/security/air-security/html-security-in-adobe-air#code-restrictions-for-content-in-different-sandboxes"},"Code restrictions for content in different sandboxes"),"\ndescribes the allowed uses of the ",(0,o.kt)("inlineCode",{parentName:"p"},"eval()")," function."),(0,o.kt)("h2",{id:"function-constructors"},"Function constructors"),(0,o.kt)("p",null,"In the application sandbox, function constructors can be used before a page has\nfinished loading. After all page ",(0,o.kt)("inlineCode",{parentName:"p"},"load")," event handlers have finished, new\nfunctions cannot be created."),(0,o.kt)("h2",{id:"loading-external-scripts"},"Loading external scripts"),(0,o.kt)("p",null,"HTML pages in the application sandbox cannot use the ",(0,o.kt)("inlineCode",{parentName:"p"},"script")," tag to load\nJavaScript files from outside of the application directory. For a page in your\napplication to load a script from outside the application directory, the page\nmust be mapped to a non-application sandbox."),(0,o.kt)("h2",{id:"the-xmlhttprequest-object"},"The XMLHttpRequest object"),(0,o.kt)("p",null,"AIR provides an XMLHttpRequest (XHR) object that applications can use to make\ndata requests. The following example illustrates a simple data request:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'xmlhttp = new XMLHttpRequest();\nxmlhttp.open("GET", "http:/www.example.com/file.data", true);\nxmlhttp.onreadystatechange = function() {\n    if (xmlhttp.readyState == 4) {\n        //do something with data...\n    }\n}\nxmlhttp.send(null);\n')),(0,o.kt)("p",null,"In contrast to a browser, AIR allows content running in the application sandbox\nto request data from any domain. The result of an XHR that contains a JSON\nstring can be evaluated into data objects unless the result also contains\nexecutable code. If executable statements are present in the XHR result, an\nerror is thrown and the evaluation attempt fails."),(0,o.kt)("p",null,"To prevent accidental injection of code from remote sources, synchronous XHRs\nreturn an empty result if made before a page has finished loading. Asynchronous\nXHRs will always return after a page has loaded."),(0,o.kt)("p",null,"By default, AIR blocks cross-domain XMLHttpRequests in non-application\nsandboxes. A parent window in the application sandbox can choose to allow\ncross-domain requests in a child frame containing content in a non-application\nsandbox by setting ",(0,o.kt)("inlineCode",{parentName:"p"},"allowCrossDomainXHR"),", an attribute added by AIR, to ",(0,o.kt)("inlineCode",{parentName:"p"},"true"),"\nin the containing frame or iframe element:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'<iframe id="mashup"\n    src="http://www.example.com/map.html"\n    allowCrossDomainXHR="true">\n</iframe>\n')),(0,o.kt)("p",null,"Note: When convenient, the AIR URLStream class can also be used to download\ndata."),(0,o.kt)("p",null,"If you dispatch an XMLHttpRequest to a remote server from a frame or iframe\ncontaining application content that has been mapped to a remote sandbox, make\nsure that the mapping URL does not mask the server address used in the XHR. For\nexample, consider the following iframe definition, which maps application\ncontent into a remote sandbox for the example.com domain:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'<iframe id="mashup"\n    src="http://www.example.com/map.html"\n    documentRoot="app:/sandbox/"\n    sandboxRoot="http://www.example.com/"\n    allowCrossDomainXHR="true">\n</iframe>\n')),(0,o.kt)("p",null,"Because the ",(0,o.kt)("inlineCode",{parentName:"p"},"sandboxRoot")," attribute remaps the root URL of the ",(0,o.kt)("a",{parentName:"p",href:"http://www.example.com"},"www.example.com"),"\naddress, all requests are loaded from the application directory and not the\nremote server. Requests are remapped whether they derive from page navigation or\nfrom an XMLHttpRequest."),(0,o.kt)("p",null,"To avoid accidentally blocking data requests to your remote server, map the\n",(0,o.kt)("inlineCode",{parentName:"p"},"sandboxRoot")," to a subdirectory of the remote URL rather than the root. The\ndirectory does not have to exist. For example, to allow requests to the\n",(0,o.kt)("a",{parentName:"p",href:"http://www.example.com"},"www.example.com")," to load from the remote server rather than the application\ndirectory, change the previous iframe to the following:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'<iframe id="mashup"\n    src="http://www.example.com/map.html"\n    documentRoot="app:/sandbox/"\n    sandboxRoot="http://www.example.com/air/"\n    allowCrossDomainXHR="true">\n</iframe>\n')),(0,o.kt)("p",null,"In this case, only content in the ",(0,o.kt)("inlineCode",{parentName:"p"},"air")," subdirectory is loaded locally."),(0,o.kt)("p",null,"For more information on sandbox mapping see\n",(0,o.kt)("a",{parentName:"p",href:"/docs/development/html-content-in-air/about-the-html-environment/html-in-air#html-frame-and-iframe-elements"},"HTML frame and iframe elements"),"\nand\n",(0,o.kt)("a",{parentName:"p",href:"/docs/development/security/air-security/html-security-in-adobe-air"},"HTML security in Adobe AIR"),"."),(0,o.kt)("h2",{id:"cookies"},"Cookies"),(0,o.kt)("p",null,"In AIR applications, only content in remote sandboxes (content loaded from http:\nand https: sources) can use cookies (the ",(0,o.kt)("inlineCode",{parentName:"p"},"document.cookie")," property). In the\napplication sandbox, other means for storing persistent data are available,\nincluding the EncryptedLocalStore, SharedObject, and FileStream classes."),(0,o.kt)("h2",{id:"the-clipboard-object"},"The Clipboard object"),(0,o.kt)("p",null,"The WebKit Clipboard API is driven with the following events: ",(0,o.kt)("inlineCode",{parentName:"p"},"copy"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"cut"),", and\n",(0,o.kt)("inlineCode",{parentName:"p"},"paste"),". The event object passed in these events provides access to the\nclipboard through the ",(0,o.kt)("inlineCode",{parentName:"p"},"clipboardData")," property. Use the following methods of the\n",(0,o.kt)("inlineCode",{parentName:"p"},"clipboardData")," object to read or write clipboard data:"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Method"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"clearData(mimeType)"),(0,o.kt)("td",{parentName:"tr",align:null},"Clears the clipboard data. Set the ",(0,o.kt)("inlineCode",{parentName:"td"},"mimeType")," parameter to the MIME type of the data to clear.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"getData(mimeType)"),(0,o.kt)("td",{parentName:"tr",align:null},"Get the clipboard data. This method can only be called in a handler for the ",(0,o.kt)("inlineCode",{parentName:"td"},"paste")," event. Set the ",(0,o.kt)("inlineCode",{parentName:"td"},"mimeType")," parameter to the MIME type of the data to return.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"setData(mimeType, data)"),(0,o.kt)("td",{parentName:"tr",align:null},"Copy data to the clipboard. Set the ",(0,o.kt)("inlineCode",{parentName:"td"},"mimeType")," parameter to the MIME type of the data.")))),(0,o.kt)("p",null,"JavaScript code outside the application sandbox can only access the clipboard\nthrough theses events. However, content in the application sandbox can access\nthe system clipboard directly using the AIR Clipboard class. For example, you\ncould use the following statement to get text format data on the clipboard:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'var clipping = air.Clipboard.generalClipboard.getData("text/plain",\n                            air.ClipboardTransferMode.ORIGINAL_ONLY);\n')),(0,o.kt)("p",null,"The valid data MIME types are:"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"MIME type"),(0,o.kt)("th",{parentName:"tr",align:null},"Value"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Text"),(0,o.kt)("td",{parentName:"tr",align:null},'"text/plain"')),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"HTML"),(0,o.kt)("td",{parentName:"tr",align:null},'"text/html"')),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"URL"),(0,o.kt)("td",{parentName:"tr",align:null},'"text/uri-list"')),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Bitmap"),(0,o.kt)("td",{parentName:"tr",align:null},'"image/x-vnd.adobe.air.bitmap"')),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"File list"),(0,o.kt)("td",{parentName:"tr",align:null},'"application/x-vnd.adobe.air.file-list"')))),(0,o.kt)("p",null,"Important: Only content in the application sandbox can access file data present\non the clipboard. If non-application content attempts to access a file object\nfrom the clipboard, a security error is thrown."),(0,o.kt)("p",null,"For more information on using the clipboard, see\n",(0,o.kt)("a",{parentName:"p",href:"/docs/development/user-interaction/copy-and-paste/"},"Copy and paste")," and\n",(0,o.kt)("a",{parentName:"p",href:"http://developer.apple.com/documentation/AppleApplications/Conceptual/SafariJSProgTopics/Tasks/CopyAndPaste.html#//apple_ref/doc/uid/30001234"},"Using the Pasteboard from JavaScript (Apple Developer Center)"),"."),(0,o.kt)("h2",{id:"drag-and-drop"},"Drag and Drop"),(0,o.kt)("p",null,"Drag-and-drop gestures into and out of HTML produce the following DOM events:\n",(0,o.kt)("inlineCode",{parentName:"p"},"dragstart"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"drag"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"dragend"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"dragenter"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"dragover"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"dragleave"),", and\n",(0,o.kt)("inlineCode",{parentName:"p"},"drop"),". The event object passed in these events provides access to the dragged\ndata through the ",(0,o.kt)("inlineCode",{parentName:"p"},"dataTransfer")," property. The ",(0,o.kt)("inlineCode",{parentName:"p"},"dataTransfer")," property references\nan object that provides the same methods as the ",(0,o.kt)("inlineCode",{parentName:"p"},"clipboardData")," object\nassociated with a clipboard event. For example, you could use the following\nfunction to get text format data from a ",(0,o.kt)("inlineCode",{parentName:"p"},"drop")," event:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'function onDrop(dragEvent){\n    return dragEvent.dataTransfer.getData("text/plain",\n            air.ClipboardTransferMode.ORIGINAL_ONLY);\n}\n')),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"dataTransfer")," object has the following important members:"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Member"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"clearData(mimeType)"),(0,o.kt)("td",{parentName:"tr",align:null},"Clears the data. Set the ",(0,o.kt)("inlineCode",{parentName:"td"},"mimeType")," parameter to the MIME type of the data representation to clear.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"getData(mimeType)"),(0,o.kt)("td",{parentName:"tr",align:null},"Get the dragged data. This method can only be called in a handler for the ",(0,o.kt)("inlineCode",{parentName:"td"},"drop")," event. Set the ",(0,o.kt)("inlineCode",{parentName:"td"},"mimeType")," parameter to the MIME type of the data to get.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"setData(mimeType, data)"),(0,o.kt)("td",{parentName:"tr",align:null},"Set the data to be dragged. Set the ",(0,o.kt)("inlineCode",{parentName:"td"},"mimeType")," parameter to the MIME type of the data.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"types"),(0,o.kt)("td",{parentName:"tr",align:null},"An array of strings containing the MIME types of all data representations currently available in the ",(0,o.kt)("inlineCode",{parentName:"td"},"dataTransfer")," object.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"effectsAllowed"),(0,o.kt)("td",{parentName:"tr",align:null},"Specifies whether the data being dragged can be copied, moved, linked, or some combination thereof. Set the ",(0,o.kt)("inlineCode",{parentName:"td"},"effectsAllowed")," property in the handler for the ",(0,o.kt)("inlineCode",{parentName:"td"},"dragstart")," event.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"dropEffect"),(0,o.kt)("td",{parentName:"tr",align:null},"Specifies which of the allowed drop effects are supported by a drag target. Set the ",(0,o.kt)("inlineCode",{parentName:"td"},"dropEffect")," property in the handler for the ",(0,o.kt)("inlineCode",{parentName:"td"},"dragEnter")," event. During the drag, the cursor changes to indicate which effect would occur if the user released the mouse. If no ",(0,o.kt)("inlineCode",{parentName:"td"},"dropEffect")," is specified, an ",(0,o.kt)("inlineCode",{parentName:"td"},"effectsAllowed")," property effect is chosen. The copy effect has priority over the move effect, which itself has priority over the link effect. The user can modify the default priority using the keyboard.")))),(0,o.kt)("p",null,"For more information on adding support for drag-and-drop to an AIR application\nsee ",(0,o.kt)("a",{parentName:"p",href:"/docs/development/user-interaction/drag-and-drop-in-air/"},"Drag and drop in AIR"),"\nand\n",(0,o.kt)("a",{parentName:"p",href:"http://developer.apple.com/documentation/AppleApplications/Conceptual/SafariJSProgTopics/Tasks/DragAndDrop.html#//apple_ref/doc/uid/30001233"},"Using the Drag-and-Drop from JavaScript (Apple Developer Center)"),"."),(0,o.kt)("h2",{id:"innerhtml-and-outerhtml-properties"},"innerHTML and outerHTML properties"),(0,o.kt)("p",null,"AIR places security restrictions on the use of the ",(0,o.kt)("inlineCode",{parentName:"p"},"innerHTML")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"outerHTML"),"\nproperties for content running in the application sandbox. Before the page load\nevent, as well as during the execution of any load event handlers, use of the\n",(0,o.kt)("inlineCode",{parentName:"p"},"innerHTML")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"outerHTML")," properties is unrestricted. However, once the page\nhas loaded, you can only use ",(0,o.kt)("inlineCode",{parentName:"p"},"innerHTML")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"outerHTML")," properties to add static\ncontent to the document. Any statement in the string assigned to ",(0,o.kt)("inlineCode",{parentName:"p"},"innerHTML")," or\n",(0,o.kt)("inlineCode",{parentName:"p"},"outerHTML")," that evaluates to executable code is ignored. For example, if you\ninclude an event callback attribute in an element definition, the event listener\nis not added. Likewise, embedded ",(0,o.kt)("inlineCode",{parentName:"p"},"<script>")," tags are not evaluated. For more\ninformation, see the\n",(0,o.kt)("a",{parentName:"p",href:"/docs/development/security/air-security/html-security-in-adobe-air"},"HTML security in Adobe AIR"),"."),(0,o.kt)("h2",{id:"documentwrite-and-documentwriteln-methods"},"Document.write() and Document.writeln() methods"),(0,o.kt)("p",null,"Use of the ",(0,o.kt)("inlineCode",{parentName:"p"},"write()")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"writeln()")," methods is not restricted in the\napplication sandbox before the ",(0,o.kt)("inlineCode",{parentName:"p"},"load")," event of the page. However, once the page\nhas loaded, calling either of these methods does not clear the page or create a\nnew one. In a non-application sandbox, as in most web browsers, calling\n",(0,o.kt)("inlineCode",{parentName:"p"},"document.write()")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"writeln()")," after a page has finished loading clears the\ncurrent page and opens a new, blank one."),(0,o.kt)("h2",{id:"documentdesignmode-property"},"Document.designMode property"),(0,o.kt)("p",null,"Set the ",(0,o.kt)("inlineCode",{parentName:"p"},"document.designMode")," property to a value of ",(0,o.kt)("inlineCode",{parentName:"p"},"on")," to make all elements\nin the document editable. Built-in editor support includes text editing, copy,\npaste, and drag-and-drop. Setting ",(0,o.kt)("inlineCode",{parentName:"p"},"designMode")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"on")," is equivalent to setting\nthe ",(0,o.kt)("inlineCode",{parentName:"p"},"contentEditable")," property of the ",(0,o.kt)("inlineCode",{parentName:"p"},"body")," element to ",(0,o.kt)("inlineCode",{parentName:"p"},"true"),". You can use the\n",(0,o.kt)("inlineCode",{parentName:"p"},"contentEditable")," property on most HTML elements to define which sections of a\ndocument are editable. See\n",(0,o.kt)("a",{parentName:"p",href:"/docs/development/html-content-in-air/about-the-html-environment/html-in-air#html-contenteditable-attribute"},"HTML contentEditable attribute"),"\nfor additional information."),(0,o.kt)("h2",{id:"unload-events-for-body-and-frameset-objects"},"unload events (for body and frameset objects)"),(0,o.kt)("p",null,"In the top-level ",(0,o.kt)("inlineCode",{parentName:"p"},"frameset")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"body")," tag of a window (including the main window\nof the application), do not use the ",(0,o.kt)("inlineCode",{parentName:"p"},"unload")," event to respond to the window (or\napplication) being closed. Instead, use ",(0,o.kt)("inlineCode",{parentName:"p"},"exiting")," event of the NativeApplication\nobject (to detect when an application is closing). Or use the ",(0,o.kt)("inlineCode",{parentName:"p"},"closing")," event of\nthe NativeWindow object (to detect when a window is closing). For example, the\nfollowing JavaScript code displays a message ( ",(0,o.kt)("inlineCode",{parentName:"p"},'"Goodbye."'),") when the user\ncloses the application:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'var app = air.NativeApplication.nativeApplication;\napp.addEventListener(air.Event.EXITING, closeHandler);\nfunction closeHandler(event)\n{\n    alert("Goodbye.");\n}\n')),(0,o.kt)("p",null,"However, scripts ",(0,o.kt)("em",{parentName:"p"},"can")," successfully respond to the ",(0,o.kt)("inlineCode",{parentName:"p"},"unload")," event caused by\nnavigation of a frame, iframe, or top-level window content."),(0,o.kt)("p",null,"Note: These limitations may be removed in a future version of Adobe AIR."),(0,o.kt)("h2",{id:"javascript-window-object"},"JavaScript Window object"),(0,o.kt)("p",null,"The Window object remains the global object in the JavaScript execution context.\nIn the application sandbox, AIR adds new properties to the JavaScript Window\nobject to provide access to the built-in classes of AIR, as well as important\nhost objects. In addition, some methods and properties behave differently\ndepending on whether they are within the application sandbox or not."),(0,o.kt)("p",null,"Window.runtime property",(0,o.kt)("br",{parentName:"p"}),"\n","The ",(0,o.kt)("inlineCode",{parentName:"p"},"runtime")," property allows you to instantiate and use the built-in runtime\nclasses from within the application sandbox. These classes include the AIR and\nFlash Player APIs (but not, for example, the Flex framework). For example, the\nfollowing statement creates an AIR file object:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"var preferencesFile = new window.runtime.flash.filesystem.File();\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"AIRAliases.js")," file, provided in the AIR SDK, contains alias definitions\nthat allow you to shorten such references. For example, when ",(0,o.kt)("inlineCode",{parentName:"p"},"AIRAliases.js")," is\nimported into a page, a File object can be created with the following statement:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"var preferencesFile = new air.File();\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"window.runtime")," property is only defined for content within the application\nsandbox and only for the parent document of a page with frames or iframes."),(0,o.kt)("p",null,"See\n",(0,o.kt)("a",{parentName:"p",href:"/docs/development/html-content-in-air/programming-html-and-javascript-in-air/using-the-airaliases-js-file"},"Using the AIRAliases.js file"),"."),(0,o.kt)("p",null,"Window.nativeWindow property",(0,o.kt)("br",{parentName:"p"}),"\n","The ",(0,o.kt)("inlineCode",{parentName:"p"},"nativeWindow")," property provides a reference to the underlying native window\nobject. With this property, you can script window functions and properties such\nas screen position, size, and visibility, and handle window events such as\nclosing, resizing, and moving. For example, the following statement closes the\nwindow:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"window.nativeWindow.close();\n")),(0,o.kt)("p",null,"Note: The window control features provided by the NativeWindow object overlap\nthe features provided by the JavaScript Window object. In such cases, you can\nuse whichever method you find most convenient."),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"window.nativeWindow")," property is only defined for content within the\napplication sandbox and only for the parent document of a page with frames or\niframes."),(0,o.kt)("p",null,"Window.htmlLoader property",(0,o.kt)("br",{parentName:"p"}),"\n","The ",(0,o.kt)("inlineCode",{parentName:"p"},"htmlLoader")," property provides a reference to the AIR HTMLLoader object that\ncontains the HTML content. With this property, you can script the appearance and\nbehavior of the HTML environment. For example, you can use the\n",(0,o.kt)("inlineCode",{parentName:"p"},"htmlLoader.paintsDefaultBackground")," property to determine whether the control\npaints a default, white background:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"window.htmlLoader.paintsDefaultBackground = false;\n")),(0,o.kt)("p",null,"Note: The HTMLLoader object itself has a ",(0,o.kt)("inlineCode",{parentName:"p"},"window")," property, which references the\nJavaScript Window object of the HTML content it contains. You can use this\nproperty to access the JavaScript environment through a reference to the\ncontaining HTMLLoader."),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"window.htmlLoader")," property is only defined for content within the\napplication sandbox and only for the parent document of a page with frames or\niframes."),(0,o.kt)("p",null,"Window.parentSandboxBridge and Window.childSandboxBridge properties",(0,o.kt)("br",{parentName:"p"}),"\n","The ",(0,o.kt)("inlineCode",{parentName:"p"},"parentSandboxBridge")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"childSandboxBridge")," properties allow you to\ndefine an interface between a parent and a child frame. For more information,\nsee\n",(0,o.kt)("a",{parentName:"p",href:"/docs/development/html-content-in-air/programming-html-and-javascript-in-air/cross-scripting-content-in-different-security-sandboxes"},"Cross-scripting content in different security sandboxes"),"."),(0,o.kt)("p",null,"Window.setTimeout() and Window.setInterval() functions",(0,o.kt)("br",{parentName:"p"}),"\n","AIR places security restrictions on use of the ",(0,o.kt)("inlineCode",{parentName:"p"},"setTimeout()")," and\n",(0,o.kt)("inlineCode",{parentName:"p"},"setInterval()")," functions within the application sandbox. You cannot define the\ncode to be executed as a string when calling ",(0,o.kt)("inlineCode",{parentName:"p"},"setTimeout()")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"setInterval()"),".\nYou must use a function reference. For more information, see\n",(0,o.kt)("a",{parentName:"p",href:"/docs/development/html-content-in-air/programming-html-and-javascript-in-air/avoiding-security-related-javascript-errors#settimeout-and-setinterval"},"setTimeout() and setInterval()"),"."),(0,o.kt)("p",null,"Window.open() function",(0,o.kt)("br",{parentName:"p"}),"\n","When called by code running in a non-application sandbox, the ",(0,o.kt)("inlineCode",{parentName:"p"},"open()")," method\nonly opens a window when called as a result of user interaction (such as a mouse\nclick or keypress). In addition, the window title is prefixed with the\napplication title (to prevent windows opened by remote content from\nimpersonating windows opened by the application). For more information, see the\n",(0,o.kt)("a",{parentName:"p",href:"/docs/development/security/air-security/html-security-in-adobe-air#restrictions-on-calling-the-javascript-windowopen-method"},"Restrictions on calling the JavaScript window.open() method"),"."),(0,o.kt)("h2",{id:"airnativeapplication-object"},"air.NativeApplication object"),(0,o.kt)("p",null,"The NativeApplication object provides information about the application state,\ndispatches several important application-level events, and provides useful\nfunctions for controlling application behavior. A single instance of the\nNativeApplication object is created automatically and can be accessed through\nthe class-defined ",(0,o.kt)("inlineCode",{parentName:"p"},"NativeApplication.nativeApplication")," property."),(0,o.kt)("p",null,"To access the object from JavaScript code you could use:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"var app = window.runtime.flash.desktop.NativeApplication.nativeApplication;\n")),(0,o.kt)("p",null,"Or, if the ",(0,o.kt)("inlineCode",{parentName:"p"},"AIRAliases.js")," script has been imported, you could use the shorter\nform:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"var app = air.NativeApplication.nativeApplication;\n")),(0,o.kt)("p",null,"The NativeApplication object can only be accessed from within the application\nsandbox. For more information about the NativeApplication object, see\n",(0,o.kt)("a",{parentName:"p",href:"/docs/development/client-system-interaction/working-with-air-runtime-and-operating-system-information"},"Working with AIR runtime and operating system information"),"."),(0,o.kt)("h2",{id:"the-javascript-url-scheme"},"The JavaScript URL scheme"),(0,o.kt)("p",null,"Execution of code defined in a JavaScript URL scheme (as in\n",(0,o.kt)("inlineCode",{parentName:"p"},"href=\"javascript:alert('Test')\""),") is blocked within the application sandbox. No\nerror is thrown."))}m.isMDXComponent=!0}}]);