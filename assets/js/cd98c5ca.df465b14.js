"use strict";(self.webpackChunkairsdk_dev=self.webpackChunkairsdk_dev||[]).push([[24653],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>u});var i=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,i,o=function(e,n){if(null==e)return{};var t,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var p=i.createContext({}),s=function(e){var n=i.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},d=function(e){var n=s(e.components);return i.createElement(p.Provider,{value:n},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},k=i.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=s(t),k=o,u=c["".concat(p,".").concat(k)]||c[k]||m[k]||a;return t?i.createElement(u,r(r({ref:n},d),{},{components:t})):i.createElement(u,r({ref:n},d))}));function u(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,r=new Array(a);r[0]=k;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l[c]="string"==typeof e?e:o,r[1]=l;for(var s=2;s<a;s++)r[s]=t[s];return i.createElement.apply(null,r)}return i.createElement.apply(null,t)}k.displayName="MDXCreateElement"},51062:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>r,default:()=>m,frontMatter:()=>a,metadata:()=>l,toc:()=>s});var i=t(87462),o=(t(67294),t(3905));const a={sidebar_position:4},r="Restricting networking APIs",l={unversionedId:"development/security/restricting-networking-apis",id:"development/security/restricting-networking-apis",title:"Restricting networking APIs",description:"Networking APIs can be restricted in two ways. To prevent malicious activity,",source:"@site/docs/development/security/restricting-networking-apis.md",sourceDirName:"development/security",slug:"/development/security/restricting-networking-apis",permalink:"/docs/development/security/restricting-networking-apis",draft:!1,editUrl:"https://github.com/airsdk/airsdk.dev/edit/main/docs/development/security/restricting-networking-apis.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"mainSidebar",previous:{title:"Permission controls",permalink:"/docs/development/security/permission-controls"},next:{title:"Full-screen mode security",permalink:"/docs/development/security/full-screen-mode-security"}},p={},s=[{value:"Blocked ports",id:"blocked-ports",level:2},{value:"Using the allowNetworking parameter",id:"using-the-allownetworking-parameter",level:2}],d={toc:s},c="wrapper";function m(e){let{components:n,...t}=e;return(0,o.kt)(c,(0,i.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"restricting-networking-apis"},"Restricting networking APIs"),(0,o.kt)("p",null,"Networking APIs can be restricted in two ways. To prevent malicious activity,\naccess to commonly reserved ports is blocked; you can't override these blocks in\nyour code. To control a SWF file's access to network functionality with regard\nto other ports, you can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"allowNetworking")," setting."),(0,o.kt)("h2",{id:"blocked-ports"},"Blocked ports"),(0,o.kt)("p",null,"Flash Player and Adobe AIR have restrictions on HTTP access to certain ports, as\ndo browsers. HTTP requests are not permitted to certain standard ports that are\nconventionally used for non-HTTP types of servers."),(0,o.kt)("p",null,"Any API that accesses a network URL is subject to these port blocking\nrestrictions. The only exception is APIs that call sockets directly, such as\n",(0,o.kt)("inlineCode",{parentName:"p"},"Socket.connect()")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"XMLSocket.connect()"),", or calls to\n",(0,o.kt)("inlineCode",{parentName:"p"},"Security.loadPolicyFile()")," in which a socket policy file is being loaded.\nSocket connections are permitted or denied through the use of socket policy\nfiles on the target server."),(0,o.kt)("p",null,"The following list shows the ActionScript 3.0 APIs to which port blocking\napplies:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"FileReference.download(),")," ",(0,o.kt)("inlineCode",{parentName:"p"},"FileReference.upload()"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"Loader.load()"),",\n",(0,o.kt)("inlineCode",{parentName:"p"},"Loader.loadBytes()"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"navigateToURL()"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"NetConnection.call()"),",\n",(0,o.kt)("inlineCode",{parentName:"p"},"NetConnection.connect()"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"NetStream.play()"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"Security.loadPolicyFile()"),",\n",(0,o.kt)("inlineCode",{parentName:"p"},"sendToURL()"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"Sound.load()"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"URLLoader.load()"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"URLStream.load()")),(0,o.kt)("p",null,"Port blocking also applies to Shared Library importing, the use of the ",(0,o.kt)("inlineCode",{parentName:"p"},"<img>"),"\ntag in text fields, and the loading of SWF files in an HTML page using the\n",(0,o.kt)("inlineCode",{parentName:"p"},"<object>")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"<embed>")," tags."),(0,o.kt)("p",null,"Port blocking also applies to the use of the ",(0,o.kt)("inlineCode",{parentName:"p"},"<img>")," tag in text fields and the\nloading of SWF files in an HTML page using the ",(0,o.kt)("inlineCode",{parentName:"p"},"<object>")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"<embed>")," tags."),(0,o.kt)("p",null,"The following lists show which ports are blocked:"),(0,o.kt)("p",null,"HTTP: 20 \xa0(ftp data), 21\xa0(ftp control)"),(0,o.kt)("p",null,"HTTP\xa0and\xa0FTP:\xa01\xa0(tcpmux), 7\xa0(echo), 9\xa0(discard), 11\xa0(systat), 13\xa0(daytime),\n15\xa0(netstat), 17\xa0(qotd), 19\xa0(chargen), 22\xa0(ssh), 23\xa0(telnet), 25\xa0(smtp),\n37\xa0(time), 42\xa0(name), 43\xa0(nicname), 53\xa0(domain), 77\xa0(priv-rjs), 79\xa0(finger),\n87\xa0(ttylink), 95\xa0(supdup), 101\xa0(hostriame), 102\xa0(iso-tsap), 103\xa0(gppitnp),\n104\xa0(acr-nema), 109\xa0(pop2), 110\xa0(pop3), 111\xa0(sunrpc), 113\xa0(auth), 115\xa0(sftp),\n117\xa0(uucp-path), 119\xa0(nntp), 123\xa0(ntp), 135\xa0(loc-srv\xa0/\xa0epmap), 139\xa0(netbios),\n143\xa0(imap2), 179\xa0(bgp), 389\xa0(ldap), 465\xa0(smtp+ssl), 512\xa0(print\xa0/\xa0exec),\n513\xa0(login), 514\xa0(shell), 515\xa0(printer), 526\xa0(tempo), 530\xa0(courier), 531\xa0(chat),\n532\xa0(netnews), 540\xa0(uucp), 556\xa0(remotefs), 563\xa0(nntp+ssl), 587\xa0(smtp),\n601\xa0(syslog), 636\xa0(ldap+ssl), 993\xa0(ldap+ssl), 995\xa0(pop3+ssl), 2049\xa0(nfs),\n4045\xa0(lockd), 6000\xa0(x11)"),(0,o.kt)("h2",{id:"using-the-allownetworking-parameter"},"Using the allowNetworking parameter"),(0,o.kt)("p",null,"You can control a SWF file's access to network functionality by setting the\n",(0,o.kt)("inlineCode",{parentName:"p"},"allowNetworking")," parameter in the ",(0,o.kt)("inlineCode",{parentName:"p"},"<object>")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"<embed>")," tags in the HTML\npage that contains the SWF content."),(0,o.kt)("p",null,"Possible values of ",(0,o.kt)("inlineCode",{parentName:"p"},"allowNetworking")," are:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},'"all"')," (the default)\u2014All networking APIs are permitted in the SWF file.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},'"internal"')," \u2014The SWF file may not call browser navigation or browser\ninteraction APIs, listed later in this section, but it may call any other\nnetworking APIs.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},'"none"')," \u2014The SWF file may not call browser navigation or browser interaction\nAPIs, listed later in this section, and it cannot use any SWF-to-SWF\ncommunication APIs, also listed later."))),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"allowNetworking")," parameter is designed to be used primarily when the SWF\nfile and the enclosing HTML page are from different domains. Using the value of\n",(0,o.kt)("inlineCode",{parentName:"p"},'"internal"')," or ",(0,o.kt)("inlineCode",{parentName:"p"},'"none"')," is not recommended when the SWF file being loaded is\nfrom the same domain as its enclosing HTML pages, because you can't ensure that\na SWF file is always loaded with the HTML page you intend. Untrusted parties\ncould load a SWF file from your domain with no enclosing HTML, in which case the\n",(0,o.kt)("inlineCode",{parentName:"p"},"allowNetworking")," restriction will not work as you intended."),(0,o.kt)("p",null,"Calling a prevented API throws a SecurityError exception."),(0,o.kt)("p",null,"Add the ",(0,o.kt)("inlineCode",{parentName:"p"},"allowNetworking")," parameter and set its value in the ",(0,o.kt)("inlineCode",{parentName:"p"},"<object>")," and\n",(0,o.kt)("inlineCode",{parentName:"p"},"<embed>")," tags in the HTML page that contains a reference to the SWF file, as\nshown in the following example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'<object classic="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"\n    Code base="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,124,0"\n    width="600" height="400" ID="test" align="middle">\n    <param name="allowNetworking" value="none" />\n    <param name="movie" value="test.swf" />\n    <param name="bgcolor" value="#333333" />\n    <embed src="test.swf" allowNetworking="none" bgcolor="#333333"\n        width="600" height="400"\n        name="test" align="middle" type="application/x-shockwave-flash"\n        pluginspage="http://www.macromedia.com/go/getflashplayer" />\n</object>\n')),(0,o.kt)("p",null,"An HTML page may also use a script to generate SWF-embedding tags. You need to\nalter the script so that it inserts the proper ",(0,o.kt)("inlineCode",{parentName:"p"},"allowNetworking")," settings. HTML\npages generated by Adobe Flash Professional and Adobe Flash Builder use the\n",(0,o.kt)("inlineCode",{parentName:"p"},"AC_FL_RunContent()")," function to embed references to SWF files. Add the\n",(0,o.kt)("inlineCode",{parentName:"p"},"allowNetworking")," parameter settings to the script, as in the following:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'AC_FL_RunContent( ... "allowNetworking", "none", ...)\n')),(0,o.kt)("p",null,"The following APIs are prevented when ",(0,o.kt)("inlineCode",{parentName:"p"},"allowNetworking")," is set to ",(0,o.kt)("inlineCode",{parentName:"p"},'"internal"'),":"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"navigateToURL()"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"fscommand()"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"ExternalInterface.call()")),(0,o.kt)("p",null,"In addition to the APIs on the previous list, the following APIs are also\nprevented when ",(0,o.kt)("inlineCode",{parentName:"p"},"allowNetworking")," is set to ",(0,o.kt)("inlineCode",{parentName:"p"},'"none"'),":"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"sendToURL()"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"FileReference.download()"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"FileReference.upload()"),",\n",(0,o.kt)("inlineCode",{parentName:"p"},"Loader.load()"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"LocalConnection.connect()"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"LocalConnection.send()"),",\n",(0,o.kt)("inlineCode",{parentName:"p"},"NetConnection.connect()"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"NetStream.play()"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"Security.loadPolicyFile()"),",\n",(0,o.kt)("inlineCode",{parentName:"p"},"SharedObject.getLocal()"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"SharedObject.getRemote()"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"Socket.connect()"),",\n",(0,o.kt)("inlineCode",{parentName:"p"},"Sound.load()"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"URLLoader.load()"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"URLStream.load()"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"XMLSocket.connect()")),(0,o.kt)("p",null,"Even if the selected ",(0,o.kt)("inlineCode",{parentName:"p"},"allowNetworking")," setting permits a SWF file to use a\nnetworking API, there may be other restrictions based on security sandbox\nlimitations (see ",(0,o.kt)("a",{parentName:"p",href:"/docs/development/security/security-sandboxes"},"Security sandboxes"),")."),(0,o.kt)("p",null,"When ",(0,o.kt)("inlineCode",{parentName:"p"},"allowNetworking")," is set to ",(0,o.kt)("inlineCode",{parentName:"p"},'"none"'),", you cannot reference external media\nin an ",(0,o.kt)("inlineCode",{parentName:"p"},"<img>")," tag in the ",(0,o.kt)("inlineCode",{parentName:"p"},"htmlText")," property of a TextField object (a\nSecurityError exception is thrown)."),(0,o.kt)("p",null,"When ",(0,o.kt)("inlineCode",{parentName:"p"},"allowNetworking")," is set to ",(0,o.kt)("inlineCode",{parentName:"p"},'"none"'),", a symbol from an imported shared\nlibrary added in the Flash Professional (not ActionScript) is blocked at run\ntime."))}m.isMDXComponent=!0}}]);