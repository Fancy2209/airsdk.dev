"use strict";(self.webpackChunkairsdk_dev=self.webpackChunkairsdk_dev||[]).push([[91608],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),c=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=c(e.components);return o.createElement(s.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},g=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(n),g=a,m=d["".concat(s,".").concat(g)]||d[g]||u[g]||i;return n?o.createElement(m,r(r({ref:t},p),{},{components:n})):o.createElement(m,r({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=g;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:a,r[1]=l;for(var c=2;c<i;c++)r[c]=n[c];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}g.displayName="MDXCreateElement"},674:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var o=n(87462),a=(n(67294),n(3905));const i={sidebar_position:1},r="Detecting geolocation changes",l={unversionedId:"development/client-system-interaction/geolocation/detecting-geolocation-changes",id:"development/client-system-interaction/geolocation/detecting-geolocation-changes",title:"Detecting geolocation changes",description:"To use the geolocation sensor, instantiate a Geolocation object and register for",source:"@site/docs/development/client-system-interaction/geolocation/detecting-geolocation-changes.md",sourceDirName:"development/client-system-interaction/geolocation",slug:"/development/client-system-interaction/geolocation/detecting-geolocation-changes",permalink:"/docs/development/client-system-interaction/geolocation/detecting-geolocation-changes",draft:!1,editUrl:"https://github.com/airsdk/airsdk.dev/edit/main/docs/development/client-system-interaction/geolocation/detecting-geolocation-changes.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"mainSidebar",previous:{title:"Geolocation",permalink:"/docs/development/client-system-interaction/geolocation/"},next:{title:"Internationalizing applications",permalink:"/docs/development/internationalizing-applications/"}},s={},c=[{value:"Checking geolocation support",id:"checking-geolocation-support",level:2}],p={toc:c},d="wrapper";function u(e){let{components:t,...n}=e;return(0,a.kt)(d,(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"detecting-geolocation-changes"},"Detecting geolocation changes"),(0,a.kt)("p",null,"To use the geolocation sensor, instantiate a Geolocation object and register for\n",(0,a.kt)("inlineCode",{parentName:"p"},"update")," events it dispatches. The ",(0,a.kt)("inlineCode",{parentName:"p"},"update")," event is a Geolocation event object.\nThe event has eight properties:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"altitude")," \u2014The altitude in meters.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"heading")," \u2014The direction of movement (with respect to true north) in degrees.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"horizontalAccuracy")," \u2014The horizontal accuracy in meters.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"latitude")," \u2014The latitude in degrees.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"longitude")," \u2014The longitude in degrees.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"speed")," \u2014The speed in meters per second.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"timestamp")," \u2014The number of milliseconds at the time of the event since the\nruntime was initialized.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"verticalAccuracy")," \u2014The vertical accuracy in meters."))),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"timestamp")," property is an int object. The others are Number objects."),(0,a.kt)("p",null,"Here is a basic example that displays geolocation data in a text field:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'var geo:Geolocation;\nif (Geolocation.isSupported)\n{\n    geo = new Geolocation();\n    geo.addEventListener(GeolocationEvent.UPDATE, updateHandler);\n}\nelse\n{\n    geoTextField.text = "Geolocation feature not supported";\n}\nfunction updateHandler(event:GeolocationEvent):void\n{\n    geoTextField.text = "latitude: " + event.latitude.toString() + "\\n"\n            + "longitude: " + event.longitude.toString() + "\\n"\n            + "altitude: " + event.altitude.toString()\n            + "speed: " + event.speed.toString()\n            + "heading: " + event.heading.toString()\n            + "horizontal accuracy: " + event.horizontalAccuracy.toString()\n            + "vertical accuracy: " + event.verticalAccuracy.toString()\n}\n')),(0,a.kt)("p",null,"To use this example, be sure to create the ",(0,a.kt)("inlineCode",{parentName:"p"},"geoTextField")," text field and add it\nto the display list before using this code."),(0,a.kt)("p",null,"You can adjust the desired time interval for geolocation events by calling the\n",(0,a.kt)("inlineCode",{parentName:"p"},"setRequestedUpdateInterval()")," method of the Geolocation object. This method\ntakes one parameter, ",(0,a.kt)("inlineCode",{parentName:"p"},"interval"),", which is the requested update interval in\nmilliseconds:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"var geo:Geolocation = new Geolocation();\ngeo.setRequestedUpdateInterval(10000);\n")),(0,a.kt)("p",null,"The actual time between geolocation updates may be greater or lesser than this\nvalue. Any change in the update interval affects all registered listeners. If\nyou don't call the ",(0,a.kt)("inlineCode",{parentName:"p"},"setRequestedUpdateInterval()")," method, the application\nreceives updates based on the device's default interval."),(0,a.kt)("p",null,"The user can prevent an application from accessing geolocation data. For\nexample, the iPhone prompts the user when an application attempts to obtain\ngeolocation data. In response to the prompt, the user can deny the application\naccess to geolocation data. The Geolocation object dispatches a ",(0,a.kt)("inlineCode",{parentName:"p"},"status")," event\nwhen the user makes access to geolocation data unavailable. Also, the\nGeolocation object has a ",(0,a.kt)("inlineCode",{parentName:"p"},"muted")," property, which is set to ",(0,a.kt)("inlineCode",{parentName:"p"},"true")," when the\ngeolocation sensor is unavailable. The Geolocation object dispatches a ",(0,a.kt)("inlineCode",{parentName:"p"},"status"),"\nevent when the ",(0,a.kt)("inlineCode",{parentName:"p"},"muted")," property changes. The following code shows how to detect\nwhen geolocation data is unavailable:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'package\n{\n    import flash.display.Sprite;\n    import flash.display.StageAlign;\n    import flash.display.StageScaleMode;\n    import flash.events.GeolocationEvent;\n    import flash.events.MouseEvent;\n    import flash.events.StatusEvent;\n    import flash.sensors.Geolocation;\n    import flash.text.TextField;\n    import flash.text.TextFormat;\n\n    public class GeolocationTest extends Sprite\n    {\n\n        private var geo:Geolocation;\n        private var log:TextField;\n\n        public function GeolocationTest()\n        {\n            super();\n            stage.align = StageAlign.TOP_LEFT;\n            stage.scaleMode = StageScaleMode.NO_SCALE;\n            setUpTextField();\n\n            if (Geolocation.isSupported)\n            {\n                geo = new Geolocation();\n                if (!geo.muted)\n                {\n                    geo.addEventListener(GeolocationEvent.UPDATE, geoUpdateHandler);\n                }\n                geo.addEventListener(StatusEvent.STATUS, geoStatusHandler);\n            }\n            else\n            {\n                log.text = "Geolocation not supported";\n            }\n        }\n\n        public function geoUpdateHandler(event:GeolocationEvent):void\n        {\n            log.text = "latitude : " + event.latitude.toString() + "\\n";\n            log.appendText("longitude : " + event.longitude.toString() + "\\n");\n        }\n\n        public function geoStatusHandler(event:StatusEvent):void\n        {\n            if (geo.muted)\n                geo.removeEventListener(GeolocationEvent.UPDATE, geoUpdateHandler);\n            else\n                geo.addEventListener(GeolocationEvent.UPDATE, geoStatusHandler);\n        }\n\n        private function setUpTextField():void\n        {\n            log = new TextField();\n            var format:TextFormat = new TextFormat("_sans", 24);\n            log.defaultTextFormat = format;\n            log.border = true;\n            log.wordWrap = true;\n            log.multiline = true;\n            log.x = 10;\n            log.y = 10;\n            log.height = stage.stageHeight - 20;\n            log.width = stage.stageWidth - 20;\n            log.addEventListener(MouseEvent.CLICK, clearLog);\n            addChild(log);\n        }\n        private function clearLog(event:MouseEvent):void\n        {\n            log.text = "";\n        }\n    }\n}\n')),(0,a.kt)("p",null,"Note: First-generation iPhones, which do not include a GPS unit, dispatch\n",(0,a.kt)("inlineCode",{parentName:"p"},"update")," events only occasionally. On these devices, a Geolocation object\ninitially dispatches one or two ",(0,a.kt)("inlineCode",{parentName:"p"},"update")," events. It then dispatches ",(0,a.kt)("inlineCode",{parentName:"p"},"update"),"\nevents when information changes noticeably."),(0,a.kt)("h2",{id:"checking-geolocation-support"},"Checking geolocation support"),(0,a.kt)("p",null,"Use the ",(0,a.kt)("inlineCode",{parentName:"p"},"Geolocation.isSupported")," property to test the runtime environment for\nthe ability to use this feature:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"if (Geolocation.isSupported)\n{\n    // Set up geolocation event listeners and code.\n}\n")),(0,a.kt)("p",null,"Currently, geolocation is only supported on ActionScript-based applications for\nthe iPhone and in Flash Lite 4. If ",(0,a.kt)("inlineCode",{parentName:"p"},"Geolocation.isSupported")," is ",(0,a.kt)("inlineCode",{parentName:"p"},"true")," at run\ntime, then geolocation support exists."),(0,a.kt)("p",null,"Some iPhone models do not have a GPS unit. These models use other means (such as\nmobile phone triangulation) to obtain geolocation data. For these models, or on\nany iPhone that has the GPS disabled, a Geolocation object may only dispatch one\nor two initial ",(0,a.kt)("inlineCode",{parentName:"p"},"update")," events."))}u.isMDXComponent=!0}}]);