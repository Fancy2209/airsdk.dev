"use strict";(self.webpackChunkairsdk_dev=self.webpackChunkairsdk_dev||[]).push([[57069],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>h});var a=t(67294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function r(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=a.createContext({}),p=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},d=function(e){var n=p(e.components);return a.createElement(s.Provider,{value:n},e.children)},c="mdxType",f={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,l=e.originalType,s=e.parentName,d=r(e,["components","mdxType","originalType","parentName"]),c=p(t),m=i,h=c["".concat(s,".").concat(m)]||c[m]||f[m]||l;return t?a.createElement(h,o(o({ref:n},d),{},{components:t})):a.createElement(h,o({ref:n},d))}));function h(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var l=t.length,o=new Array(l);o[0]=m;var r={};for(var s in n)hasOwnProperty.call(n,s)&&(r[s]=n[s]);r.originalType=e,r[c]="string"==typeof e?e:i,o[1]=r;for(var p=2;p<l;p++)o[p]=t[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},4671:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>f,frontMatter:()=>l,metadata:()=>r,toc:()=>p});var a=t(87462),i=(t(67294),t(3905));const l={sidebar_position:1},o="Using the FileReference class",r={unversionedId:"development/files-and-data/working-with-the-file-system/using-the-filereference-class",id:"development/files-and-data/working-with-the-file-system/using-the-filereference-class",title:"Using the FileReference class",description:"A FileReference object represents a data file on a client or server machine. The",source:"@site/docs/development/files-and-data/working-with-the-file-system/using-the-filereference-class.md",sourceDirName:"development/files-and-data/working-with-the-file-system",slug:"/development/files-and-data/working-with-the-file-system/using-the-filereference-class",permalink:"/docs/development/files-and-data/working-with-the-file-system/using-the-filereference-class",draft:!1,editUrl:"https://github.com/airsdk/airsdk.dev/edit/main/docs/development/files-and-data/working-with-the-file-system/using-the-filereference-class.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"mainSidebar",previous:{title:"Example: Reading and writing data with random access",permalink:"/docs/development/files-and-data/working-with-the-file-system/using-the-air-file-system-api/reading-and-writing-files/example-reading-and-writing-data-with-random-access"},next:{title:"Storing local data",permalink:"/docs/development/files-and-data/storing-local-data/"}},s={},p=[{value:"FileReference class",id:"filereference-class",level:2},{value:"Loading data from files",id:"loading-data-from-files",level:2},{value:"Saving data to local files",id:"saving-data-to-local-files",level:2},{value:"Uploading files to a server",id:"uploading-files-to-a-server",level:2},{value:"Downloading files from a server",id:"downloading-files-from-a-server",level:2},{value:"FileReferenceList class",id:"filereferencelist-class",level:2},{value:"Adobe recommends",id:"adobe-recommends",level:2}],d={toc:p},c="wrapper";function f(e){let{components:n,...l}=e;return(0,i.kt)(c,(0,a.Z)({},d,l,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"using-the-filereference-class"},"Using the FileReference class"),(0,i.kt)("p",null,"A FileReference object represents a data file on a client or server machine. The\nmethods of the FileReference class let your application load and save data files\nlocally, and transfer file data to and from remote servers."),(0,i.kt)("p",null,"The FileReference class offers two different approaches to loading,\ntransferring, and saving data files. Since its introduction, the FileReference\nclass has includedthe ",(0,i.kt)("inlineCode",{parentName:"p"},"browse()")," method, the ",(0,i.kt)("inlineCode",{parentName:"p"},"upload()")," method, and the\n",(0,i.kt)("inlineCode",{parentName:"p"},"download()")," method. Use the ",(0,i.kt)("inlineCode",{parentName:"p"},"browse()")," method to let the user select a file.\nUse the ",(0,i.kt)("inlineCode",{parentName:"p"},"upload()")," method to transfer the file data to a remote server. Use the\n",(0,i.kt)("inlineCode",{parentName:"p"},"download()")," method to retrieve that data from the server and save it in a local\nfile. Starting with Flash Player 10 and Adobe AIR 1.5, the FileReference class\nincludes the ",(0,i.kt)("inlineCode",{parentName:"p"},"load()")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"save()")," methods. The ",(0,i.kt)("inlineCode",{parentName:"p"},"load()")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"save()")," methods\nallow you to access and save local files directly as well. The use of those\nmethods is similar to the equivalent-named methods in the URLLoader and Loader\nclasses."),(0,i.kt)("p",null,"Note: The File class, which extends the FileReference class, and the FileStream\nclass provide additional functions for working with files and the local file\nsystem. The File and FileStream classes are only supported in AIR and not in the\nFlash Player."),(0,i.kt)("h2",{id:"filereference-class"},"FileReference class"),(0,i.kt)("p",null,"Each FileReference object represents a single data file on the local machine.\nThe properties of the FileReference class contain information about the file's\nsize, type, name, filename extension, creator, creation date, and modification\ndate."),(0,i.kt)("p",null,"Note: The ",(0,i.kt)("inlineCode",{parentName:"p"},"creator")," property is supported on Mac OS only. All other platforms\nreturn ",(0,i.kt)("inlineCode",{parentName:"p"},"null"),"."),(0,i.kt)("p",null,"Note: The ",(0,i.kt)("inlineCode",{parentName:"p"},"extension")," property is only supported in Adobe AIR."),(0,i.kt)("p",null,"You can create an instance of the FileReference class one of two ways:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Use the ",(0,i.kt)("inlineCode",{parentName:"p"},"new")," operator, as shown in the following code: import\nflash.net.FileReference; var fileRef:FileReference = new FileReference();")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Call the ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReferenceList.browse()")," method, which opens a dialog box and\nprompts the user to select one or more files to upload. It then creates an\narray of FileReference objects if the user successfully selects one or more\nfiles."))),(0,i.kt)("p",null,"Once you have created a FileReference object, you can do the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Call the ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.browse()")," method, which opens a dialog box and prompts\nthe user to select a single file from the local file system. This is usually\ndone before a subsequent call to the ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.upload()")," method or\n",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.load()")," method. Call the ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.upload()")," method to\nupload the file to a remote server. Call to the ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.load()")," method\nto open a local file.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Call the ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.download()")," method. The ",(0,i.kt)("inlineCode",{parentName:"p"},"download()")," method opens a\ndialog box to let the user select a location for saving a new file. Then it\ndownloads data from the server and stores it in the new file.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Call the ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.load()")," method. This method begins loading data from a\nfile selected previously using the ",(0,i.kt)("inlineCode",{parentName:"p"},"browse()")," method. The ",(0,i.kt)("inlineCode",{parentName:"p"},"load()")," method\ncan't be called until the ",(0,i.kt)("inlineCode",{parentName:"p"},"browse()")," operation completes (the user selects a\nfile).")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Call the ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.save()")," method. This method opens a dialog box and\nprompts the user to choose a single file location on the local file system. It\nthen saves data to the specified location."))),(0,i.kt)("p",null,"Note: You can only perform one ",(0,i.kt)("inlineCode",{parentName:"p"},"browse()"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"download()"),", or ",(0,i.kt)("inlineCode",{parentName:"p"},"save()")," action at a\ntime, because only one dialog box can be open at any point."),(0,i.kt)("p",null,"The FileReference object properties such as ",(0,i.kt)("inlineCode",{parentName:"p"},"name"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"size"),", or\n",(0,i.kt)("inlineCode",{parentName:"p"},"modificationDate")," are not defined until one of the following happens:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.browse()")," method or ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReferenceList.browse()")," method has\nbeen called, and the user has selected a file using the dialog box.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.download()")," method has been called, and the user has\nspecified a new file location using the dialog box."))),(0,i.kt)("p",null,"Note: When performing a download, only the ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.name")," property is\npopulated before the download is complete. After the file has been downloaded,\nall properties are available."),(0,i.kt)("p",null,"While calls to the ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.browse()"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReferenceList.browse()"),",\n",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.download()"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.load()"),", or ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.save()"),"\nmethods are executing, most players continue SWF file playback including\ndispatching events and executing code."),(0,i.kt)("p",null,"For uploading and downloading operations, a SWF file can access files only\nwithin its own domain, including any domains specified by a policy file. You\nneed to put a policy file on the server containing the file if that server is\nnot in the same domain as the SWF file initiating the upload or download."),(0,i.kt)("p",null,"See\n",(0,i.kt)("a",{parentName:"p",href:"https://airsdk.dev/reference/actionscript/3.0/flash/net/FileReference.html"},"FileReference"),"."),(0,i.kt)("h2",{id:"loading-data-from-files"},"Loading data from files"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.load()")," method lets you load data from a local file into\nmemory."),(0,i.kt)("p",null,"Note: Your code must first call the ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.browse()")," method to let the\nuser select a file to load. This restriction does not apply to content running\nin Adobe AIR in the application security sandbox"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.load()")," method returns immediately after being called, but\nthe data being loaded isn't available immediately. The FileReference object\ndispatches events to invoke listener methods at each step of the loading\nprocess."),(0,i.kt)("p",null,"The FileReference object dispatches the following events during the loading\nprocess."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"open")," event ( ",(0,i.kt)("inlineCode",{parentName:"p"},"Event.OPEN"),"): Dispatched when the load operation starts.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"progress")," event ( ",(0,i.kt)("inlineCode",{parentName:"p"},"ProgressEvent.PROGRESS"),"): Dispatched periodically as bytes\nof data are read from the file.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"complete")," event ( ",(0,i.kt)("inlineCode",{parentName:"p"},"Event.COMPLETE"),"): Dispatched when the load operation\ncompletes successfully.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"ioError")," event ( ",(0,i.kt)("inlineCode",{parentName:"p"},"IOErrorEvent.IO_ERROR"),"): Dispatched if the load process\nfails because an input/output error occurs while opening or reading data from\nthe file."))),(0,i.kt)("p",null,"Once the FileReference object dispatches the complete event, the loaded data can\nbe accessed as a ByteArray in the FileReference object's ",(0,i.kt)("inlineCode",{parentName:"p"},"data")," property."),(0,i.kt)("p",null,"The following example shows how to prompt the user to select a file and then\nload the data from that file into memory:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'package\n{\n    import flash.display.Sprite;\n    import flash.events.*;\n    import flash.net.FileFilter;\n    import flash.net.FileReference;\n    import flash.net.URLRequest;\n    import flash.utils.ByteArray;\n\n    public class FileReferenceExample1 extends Sprite\n    {\n        private var fileRef:FileReference;\n        public function FileReferenceExample1()\n        {\n            fileRef = new FileReference();\n            fileRef.addEventListener(Event.SELECT, onFileSelected);\n            fileRef.addEventListener(Event.CANCEL, onCancel);\n            fileRef.addEventListener(IOErrorEvent.IO_ERROR, onIOError);\n            fileRef.addEventListener(SecurityErrorEvent.SECURITY_ERROR,\n                        onSecurityError);\n            var textTypeFilter:FileFilter = new FileFilter("Text Files (*.txt, *.rtf)",\n                        "*.txt;*.rtf");\n            fileRef.browse([textTypeFilter]);\n        }\n        public function onFileSelected(evt:Event):void\n        {\n            fileRef.addEventListener(ProgressEvent.PROGRESS, onProgress);\n            fileRef.addEventListener(Event.COMPLETE, onComplete);\n            fileRef.load();\n        }\n\n        public function onProgress(evt:ProgressEvent):void\n        {\n            trace("Loaded " + evt.bytesLoaded + " of " + evt.bytesTotal + " bytes.");\n        }\n\n        public function onComplete(evt:Event):void\n        {\n            trace("File was successfully loaded.");\n            trace(fileRef.data);\n        }\n\n        public function onCancel(evt:Event):void\n        {\n            trace("The browse request was canceled by the user.");\n        }\n\n        public function onIOError(evt:IOErrorEvent):void\n        {\n            trace("There was an IO Error.");\n        }\n        public function onSecurityError(evt:Event):void\n        {\n            trace("There was a security error.");\n        }\n    }\n}\n')),(0,i.kt)("p",null,"The example code first creates the FileReference object named ",(0,i.kt)("inlineCode",{parentName:"p"},"fileRef")," and then\ncalls its ",(0,i.kt)("inlineCode",{parentName:"p"},"browse()")," method. The ",(0,i.kt)("inlineCode",{parentName:"p"},"browse()")," method opens a dialog box that\nprompts the user to select a file. When a file is selected, the code invokes the\n",(0,i.kt)("inlineCode",{parentName:"p"},"onFileSelected()")," method. This method adds listeners for the ",(0,i.kt)("inlineCode",{parentName:"p"},"progress")," and\n",(0,i.kt)("inlineCode",{parentName:"p"},"complete")," events and then calls the FileReference object's ",(0,i.kt)("inlineCode",{parentName:"p"},"load()")," method. The\nother handler methods in the example simply output messages to report on the\nprogress of the load operation. When the loading completes, the application\ndisplays the contents of the loaded file using the ",(0,i.kt)("inlineCode",{parentName:"p"},"trace()")," method."),(0,i.kt)("p",null,"In Adobe AIR, the FileStream class provides additional functionality for reading\ndata from a local file. See\n",(0,i.kt)("a",{parentName:"p",href:"/docs/development/files-and-data/working-with-the-file-system/using-the-air-file-system-api/reading-and-writing-files/"},"Reading and writing files"),"."),(0,i.kt)("h2",{id:"saving-data-to-local-files"},"Saving data to local files"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.save()")," method lets you save data to a local file. It starts\nby opening a dialog box to let the user enter a new filename and location to\nwhich to save a file. After the user selects the filename and location, the data\nis written to the new file. When the file is saved successfully, the properties\nof the FileReference object are populated with the properties of the local file."),(0,i.kt)("p",null,"Note: Your code can only call the ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.save()")," method in response to a\nuser-initiated event such as a mouse click or a keypress event. Otherwise an\nerror is thrown. This restriction does not apply to content running in Adobe AIR\nin the application security sandbox."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.save()")," method returns immediately after being called. The\nFileReference object then dispatches events to call listener methods at each\nstep of the file saving process."),(0,i.kt)("p",null,"The FileReference object dispatches the following events during the file saving\nprocess:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"select")," event ( ",(0,i.kt)("inlineCode",{parentName:"p"},"Event.SELECT"),"): Dispatched when the user specifies the\nlocation and file name for the new file to be saved.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"cancel")," event ( ",(0,i.kt)("inlineCode",{parentName:"p"},"Event.CANCEL"),"): Dispatched when the user click the Cancel\nbutton in the dialog box.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"open")," event ( ",(0,i.kt)("inlineCode",{parentName:"p"},"Event.OPEN"),"): Dispatched when the save operation starts.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"progress")," event ( ",(0,i.kt)("inlineCode",{parentName:"p"},"ProgressEvent.PROGRESS"),"): Dispatched periodically as bytes\nof data are saved to the file.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"complete")," event ( ",(0,i.kt)("inlineCode",{parentName:"p"},"Event.COMPLETE"),"): Dispatched when the save operation\ncompletes successfully.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"ioError")," event ( ",(0,i.kt)("inlineCode",{parentName:"p"},"IOErrorEvent.IO_ERROR"),"): Dispatched if the saving process\nfails because an input/output error occurs while attempting to save data to\nthe file."))),(0,i.kt)("p",null,"The type of object passed in the ",(0,i.kt)("inlineCode",{parentName:"p"},"data")," parameter of the ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.save()"),"\nmethod determines how the data is written to the file:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"If it is a String value, then it is saved as a text file using UTF-8 encoding.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"If it is an XML object, then it is written to a file in XML format with all\nformatting preserved.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"If it is a ByteArray object, then its contents are written directly to the\nfile with no conversion.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"If it is some other object, then the ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.save()")," method calls the\nobject's ",(0,i.kt)("inlineCode",{parentName:"p"},"toString()")," method and then saves the resulting String value to a\nUTF-8 text file. If the object's ",(0,i.kt)("inlineCode",{parentName:"p"},"toString()")," method can't be called, then an\nerror is thrown."))),(0,i.kt)("p",null,"If the value of the ",(0,i.kt)("inlineCode",{parentName:"p"},"data")," parameter is ",(0,i.kt)("inlineCode",{parentName:"p"},"null"),", then an error is thrown."),(0,i.kt)("p",null,"The following code extends the previous example for the ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.load()"),"\nmethod. After reading the data from the file, this example prompts the user for\na filename and then saves the data in a new file:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'package\n{\n    import flash.display.Sprite;\n    import flash.events.*;\n    import flash.net.FileFilter;\n    import flash.net.FileReference;\n    import flash.net.URLRequest;\n    import flash.utils.ByteArray;\n\n    public class FileReferenceExample2 extends Sprite\n    {\n        private var fileRef:FileReference;\n        public function FileReferenceExample2()\n        {\n            fileRef = new FileReference();\n            fileRef.addEventListener(Event.SELECT, onFileSelected);\n            fileRef.addEventListener(Event.CANCEL, onCancel);\n            fileRef.addEventListener(IOErrorEvent.IO_ERROR, onIOError);\n            fileRef.addEventListener(SecurityErrorEvent.SECURITY_ERROR,\n                        onSecurityError);\n            var textTypeFilter:FileFilter = new FileFilter("Text Files (*.txt, *.rtf)",\n                        "*.txt;*.rtf");\n            fileRef.browse([textTypeFilter]);\n        }\n        public function onFileSelected(evt:Event):void\n        {\n            fileRef.addEventListener(ProgressEvent.PROGRESS, onProgress);\n            fileRef.addEventListener(Event.COMPLETE, onComplete);\n            fileRef.load();\n        }\n\n        public function onProgress(evt:ProgressEvent):void\n        {\n            trace("Loaded " + evt.bytesLoaded + " of " + evt.bytesTotal + " bytes.");\n        }\n        public function onCancel(evt:Event):void\n        {\n            trace("The browse request was canceled by the user.");\n        }\n        public function onComplete(evt:Event):void\n        {\n            trace("File was successfully loaded.");\n            fileRef.removeEventListener(Event.SELECT, onFileSelected);\n            fileRef.removeEventListener(ProgressEvent.PROGRESS, onProgress);\n            fileRef.removeEventListener(Event.COMPLETE, onComplete);\n            fileRef.removeEventListener(Event.CANCEL, onCancel);\n            saveFile();\n        }\n        public function saveFile():void\n        {\n            fileRef.addEventListener(Event.SELECT, onSaveFileSelected);\n            fileRef.save(fileRef.data,"NewFileName.txt");\n        }\n\n        public function onSaveFileSelected(evt:Event):void\n        {\n            fileRef.addEventListener(ProgressEvent.PROGRESS, onSaveProgress);\n            fileRef.addEventListener(Event.COMPLETE, onSaveComplete);\n            fileRef.addEventListener(Event.CANCEL, onSaveCancel);\n        }\n\n        public function onSaveProgress(evt:ProgressEvent):void\n        {\n            trace("Saved " + evt.bytesLoaded + " of " + evt.bytesTotal + " bytes.");\n        }\n\n        public function onSaveComplete(evt:Event):void\n        {\n            trace("File saved.");\n            fileRef.removeEventListener(Event.SELECT, onSaveFileSelected);\n            fileRef.removeEventListener(ProgressEvent.PROGRESS, onSaveProgress);\n            fileRef.removeEventListener(Event.COMPLETE, onSaveComplete);\n            fileRef.removeEventListener(Event.CANCEL, onSaveCancel);\n        }\n\n        public function onSaveCancel(evt:Event):void\n        {\n            trace("The save request was canceled by the user.");\n        }\n\n        public function onIOError(evt:IOErrorEvent):void\n        {\n            trace("There was an IO Error.");\n        }\n        public function onSecurityError(evt:Event):void\n        {\n            trace("There was a security error.");\n        }\n    }\n}\n')),(0,i.kt)("p",null,"When all of the data loads from the file, the code calls the ",(0,i.kt)("inlineCode",{parentName:"p"},"onComplete()"),"\nmethod. The ",(0,i.kt)("inlineCode",{parentName:"p"},"onComplete()")," method removes the listeners for the loading events\nand then calls the ",(0,i.kt)("inlineCode",{parentName:"p"},"saveFile()")," method. The ",(0,i.kt)("inlineCode",{parentName:"p"},"saveFile()")," method calls the\n",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.save()")," method. The ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.save()")," method opens a new\ndialog box to let the user enter a new filename and location to save the file.\nThe remaining event listener methods trace the progress of the file saving\nprocess until it is complete."),(0,i.kt)("p",null,"In Adobe AIR, the FileStream class provides additional functionality for writing\ndata to a local file. See\n",(0,i.kt)("a",{parentName:"p",href:"/docs/development/files-and-data/working-with-the-file-system/using-the-air-file-system-api/reading-and-writing-files/"},"Reading and writing files"),"."),(0,i.kt)("h2",{id:"uploading-files-to-a-server"},"Uploading files to a server"),(0,i.kt)("p",null,"To upload files to a server, first call the ",(0,i.kt)("inlineCode",{parentName:"p"},"browse()")," method to allow a user to\nselect one or more files. Next, when the ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.upload()")," method is\ncalled, the selected file is transferred to the server. If the user selects\nmultiple files using the ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReferenceList.browse()")," method, Flash Player\ncreates an array of selected files called ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReferenceList.fileList"),". You can\nthen use the ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.upload()")," method to upload each file individually."),(0,i.kt)("p",null,"Note: Using the ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.browse()")," method allows you to upload single\nfiles only. To allow a user to upload multiple files, use the\n",(0,i.kt)("inlineCode",{parentName:"p"},"FileReferenceList.browse()")," method."),(0,i.kt)("p",null,"By default, the system file picker dialog box allows users to pick any file type\nfrom the local computer. Developers can specify one or more custom file type\nfilters by using the FileFilter class and passing an array of file filter\ninstances to the ",(0,i.kt)("inlineCode",{parentName:"p"},"browse()")," method:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'var imageTypes:FileFilter = new FileFilter("Images (*.jpg, *.jpeg, *.gif, *.png)", "*.jpg; *.jpeg; *.gif; *.png");\nvar textTypes:FileFilter = new FileFilter("Text Files (*.txt, *.rtf)", "*.txt; *.rtf");\nvar allTypes:Array = new Array(imageTypes, textTypes);\nvar fileRef:FileReference = new FileReference();\nfileRef.browse(allTypes);\n')),(0,i.kt)("p",null,"When the user has selected the files and clicked the Open button in the system\nfile picker, the ",(0,i.kt)("inlineCode",{parentName:"p"},"Event.SELECT")," event is dispatched. If the\n",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.browse()")," method is used to select a file to upload, the\nfollowing code sends the file to a web server:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'var fileRef:FileReference = new FileReference();\nfileRef.addEventListener(Event.SELECT, selectHandler);\nfileRef.addEventListener(Event.COMPLETE, completeHandler);\ntry\n{\n    var success:Boolean = fileRef.browse();\n}\ncatch (error:Error)\n{\n    trace("Unable to browse for files.");\n}\nfunction selectHandler(event:Event):void\n{\n    var request:URLRequest = new URLRequest("http://www.[yourdomain].com/fileUploadScript.cfm")\n    try\n    {\n        fileRef.upload(request);\n    }\n    catch (error:Error)\n    {\n        trace("Unable to upload file.");\n    }\n}\nfunction completeHandler(event:Event):void\n{\n    trace("uploaded");\n}\n')),(0,i.kt)("p",null,(0,i.kt)("img",{src:t(39683).Z,width:"17",height:"21"})," You can send data to the server with the\n",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.upload()")," method by using the ",(0,i.kt)("inlineCode",{parentName:"p"},"URLRequest.method")," and\n",(0,i.kt)("inlineCode",{parentName:"p"},"URLRequest.data")," properties to send variables using the ",(0,i.kt)("inlineCode",{parentName:"p"},"POST")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"GET"),"\n",(0,i.kt)("em",{parentName:"p"},"methods.")),(0,i.kt)("p",null,"When you attempt to upload a file using the ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.upload()")," method, the\nfollowing events are dispatched:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"open")," event ( ",(0,i.kt)("inlineCode",{parentName:"p"},"Event.OPEN"),"): Dispatched when the upload operation starts.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"progress")," event ( ",(0,i.kt)("inlineCode",{parentName:"p"},"ProgressEvent.PROGRESS"),"): Dispatched periodically as bytes\nof data from the file are uploaded.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"complete")," event ( ",(0,i.kt)("inlineCode",{parentName:"p"},"Event.COMPLETE"),"): Dispatched when the upload operation\ncompletes successfully.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"httpStatus")," event ( ",(0,i.kt)("inlineCode",{parentName:"p"},"HTTPStatusEvent.HTTP_STATUS"),"): Dispatched when the\nupload process fails because of an HTTP error.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"httpResponseStatus")," event ( ",(0,i.kt)("inlineCode",{parentName:"p"},"HTTPStatusEvent.HTTP_RESPONSE_STATUS"),"):\nDispatched if a call to the ",(0,i.kt)("inlineCode",{parentName:"p"},"upload()")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"uploadUnencoded()")," method attempts\nto access data over HTTP and Adobe AIR is able to detect and return the status\ncode for the request.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"securityError")," event ( ",(0,i.kt)("inlineCode",{parentName:"p"},"SecurityErrorEvent.SECURITY_ERROR"),"): Dispatched when\nan upload operation fails because of a security violation.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"uploadCompleteData")," event ( ",(0,i.kt)("inlineCode",{parentName:"p"},"DataEvent.UPLOAD_COMPLETE_DATA"),"): Dispatched\nafter data is received from the server after a successful upload.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"ioError")," event ( ",(0,i.kt)("inlineCode",{parentName:"p"},"IOErrorEvent.IO_ERROR"),"): Dispatched if the upload process\nfails for any of the following reasons:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"An input/output error occurred while Flash Player is reading, writing, or\ntransmitting the file.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The SWF tried to upload a file to a server that requires authentication\n(such as a user name and password). During upload, Flash Player does not\nprovide a means for users to enter passwords.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"url")," parameter contains an invalid protocol. The\n",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.upload()")," method must use either HTTP or HTTPS."))))),(0,i.kt)("p",null,(0,i.kt)("img",{src:t(39683).Z,width:"17",height:"21"})," Flash Player does not offer complete support for\nservers that require authentication. Only SWF files that are running in a\nbrowser using the browser plug-in or Microsoft ActiveX\xae control can provide a\ndialog box to prompt the user to enter a user name and password for\nauthentication, and then only for downloads. For uploads using the plug-in or\nActiveX control or upload/download using either the stand-alone or external\nplayer, the file transfer fails."),(0,i.kt)("p",null,"To create a server script in ColdFusion to accept a file upload from Flash\nPlayer, you can use code similar to the following:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'<cffile action="upload" filefield="Filedata" destination="#ExpandPath(\'./\')#" nameconflict="OVERWRITE" />\n')),(0,i.kt)("p",null,"This ColdFusion code uploads the file sent by Flash Player and saves it to the\nsame directory as the ColdFusion template, overwriting any file with the same\nname. The previous code shows the bare minimum amount of code necessary to\naccept a file upload; this script should not be used in a production\nenvironment. Ideally, add data validation to ensure that users upload only\naccepted file types, such as an image instead of a potentially dangerous\nserver-side script."),(0,i.kt)("p",null,"The following code demonstrates file uploads using PHP, and it includes data\nvalidation. The script limits the number of uploaded files in the upload\ndirectory to 10, ensures that the file is less than 200 KB, and permits only\nJPEG, GIF, or PNG files to be uploaded and saved to the file system."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"<?php\n    $MAXIMUM_FILESIZE = 1024 * 200; // 200KB\n    $MAXIMUM_FILE_COUNT = 10; // keep maximum 10 files on server\n    echo exif_imagetype($_FILES['Filedata']);\n    if ($_FILES['Filedata']['size'] <= $MAXIMUM_FILESIZE)\n    {\n        move_uploaded_file($_FILES['Filedata']['tmp_name'], \"./temporary/\".$_FILES['Filedata']['name']);\n        $type = exif_imagetype(\"./temporary/\".$_FILES['Filedata']['name']);\n        if ($type == 1 || $type == 2 || $type == 3)\n        {\n            rename(\"./temporary/\".$_FILES['Filedata']['name'], \"./images/\".$_FILES['Filedata']['name']);\n        }\n        else\n        {\n            unlink(\"./temporary/\".$_FILES['Filedata']['name']);\n        }\n    }\n    $directory = opendir('./images/');\n    $files = array();\n    while ($file = readdir($directory))\n    {\n        array_push($files, array('./images/'.$file, filectime('./images/'.$file)));\n    }\n    usort($files, sorter);\n    if (count($files) > $MAXIMUM_FILE_COUNT)\n    {\n        $files_to_delete = array_splice($files, 0, count($files) - $MAXIMUM_FILE_COUNT);\n        for ($i = 0; $i < count($files_to_delete); $i++)\n        {\n            unlink($files_to_delete[$i][0]);\n        }\n    }\n    print_r($files);\n    closedir($directory);\n\n    function sorter($a, $b)\n    {\n        if ($a[1] == $b[1])\n        {\n            return 0;\n        }\n        else\n        {\n            return ($a[1] < $b[1]) ? -1 : 1;\n        }\n    }\n?>\n")),(0,i.kt)("p",null,"You can pass additional variables to the upload script using either the ",(0,i.kt)("inlineCode",{parentName:"p"},"POST"),"\nor ",(0,i.kt)("inlineCode",{parentName:"p"},"GET")," request method. To send additional ",(0,i.kt)("inlineCode",{parentName:"p"},"POST")," variables to your upload\nscript, you can use the following code:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'var fileRef:FileReference = new FileReference();\nfileRef.addEventListener(Event.SELECT, selectHandler);\nfileRef.addEventListener(Event.COMPLETE, completeHandler);\nfileRef.browse();\nfunction selectHandler(event:Event):void\n{\n    var params:URLVariables = new URLVariables();\n    params.date = new Date();\n    params.ssid = "94103-1394-2345";\n    var request:URLRequest = new URLRequest("http://www.yourdomain.com/FileReferenceUpload/fileupload.cfm");\n    request.method = URLRequestMethod.POST;\n    request.data = params;\n    fileRef.upload(request, "Custom1");\n}\nfunction completeHandler(event:Event):void\n{\n    trace("uploaded");\n}\n')),(0,i.kt)("p",null,"The previous example creates a URLVariables object that you pass to the remote\nserver- side script. In previous versions of ActionScript, you could pass\nvariables to the server upload script by passing values in the query string.\nActionScript 3.0 allows you to pass variables to the remote script using a\nURLRequest object, which allows you to pass data using either the ",(0,i.kt)("inlineCode",{parentName:"p"},"POST")," or\n",(0,i.kt)("inlineCode",{parentName:"p"},"GET")," method; this, in turn, makes passing larger sets of data easier and\ncleaner. In order to specify whether the variables are passed using the ",(0,i.kt)("inlineCode",{parentName:"p"},"GET")," or\n",(0,i.kt)("inlineCode",{parentName:"p"},"POST")," request method, you can set the ",(0,i.kt)("inlineCode",{parentName:"p"},"URLRequest.method")," property to either\n",(0,i.kt)("inlineCode",{parentName:"p"},"URLRequestMethod.GET")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"URLRequestMethod.POST"),", respectively."),(0,i.kt)("p",null,"ActionScript 3.0 also lets you override the default ",(0,i.kt)("inlineCode",{parentName:"p"},"Filedata")," upload file field\nname by providing a second parameter to the ",(0,i.kt)("inlineCode",{parentName:"p"},"upload()")," method, as demonstrated\nin the previous example (which replaced the default value ",(0,i.kt)("inlineCode",{parentName:"p"},"Filedata")," with\n",(0,i.kt)("inlineCode",{parentName:"p"},"Custom1"),")."),(0,i.kt)("p",null,"By default, Flash Player does not attempt to send a test upload, although you\ncan override this default by passing a value of ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," as the third parameter to\nthe ",(0,i.kt)("inlineCode",{parentName:"p"},"upload()")," method. The purpose of the test upload is to check whether the\nactual file upload will be successful and that server authentication, if\nrequired, will succeed."),(0,i.kt)("p",null,"Note: A test upload occurs only on Windows-based Flash Players at this time."),(0,i.kt)("p",null,"The server script that handles the file upload should expect an HTTP ",(0,i.kt)("inlineCode",{parentName:"p"},"POST"),"\nrequest with the following elements:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"Content-Type")," with a value of ",(0,i.kt)("inlineCode",{parentName:"p"},"multipart/form-data."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"Content-Disposition")," with a ",(0,i.kt)("inlineCode",{parentName:"p"},"name"),' attribute set to " ',(0,i.kt)("inlineCode",{parentName:"p"},"Filedata"),' " and a\n',(0,i.kt)("inlineCode",{parentName:"p"},"filename")," attribute set to the name of the original file. You can specify a\ncustom ",(0,i.kt)("inlineCode",{parentName:"p"},"name")," attribute by passing a value for the ",(0,i.kt)("inlineCode",{parentName:"p"},"uploadDataFieldName"),"\nparameter in the ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.upload()")," method.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The binary contents of the file."))),(0,i.kt)("p",null,"Here is a sample HTTP ",(0,i.kt)("inlineCode",{parentName:"p"},"POST")," request:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'POST /handler.asp HTTP/1.1\nAccept: text/*\nContent-Type: multipart/form-data;\nboundary=----------Ij5ae0ae0KM7GI3KM7ei4cH2ei4gL6\nUser-Agent: Shockwave Flash\nHost: www.mydomain.com\nContent-Length: 421\nConnection: Keep-Alive\nCache-Control: no-cache\n\n------------Ij5ae0ae0KM7GI3KM7ei4cH2ei4gL6\nContent-Disposition: form-data; name="Filename"\n\nsushi.jpg\n------------Ij5ae0ae0KM7GI3KM7ei4cH2ei4gL6\nContent-Disposition: form-data; name="Filedata"; filename="sushi.jpg"\nContent-Type: application/octet-stream\n\nTest File\n------------Ij5ae0ae0KM7GI3KM7ei4cH2ei4gL6\nContent-Disposition: form-data; name="Upload"\n\nSubmit Query\n------------Ij5ae0ae0KM7GI3KM7ei4cH2ei4gL6\n(actual file data,,,)\n')),(0,i.kt)("p",null,"The following sample HTTP ",(0,i.kt)("inlineCode",{parentName:"p"},"POST")," request sends three ",(0,i.kt)("inlineCode",{parentName:"p"},"POST")," variables:\n",(0,i.kt)("inlineCode",{parentName:"p"},"api_sig"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"api_key"),", and ",(0,i.kt)("inlineCode",{parentName:"p"},"auth_token"),", and uses a custom upload data field name\nvalue of ",(0,i.kt)("inlineCode",{parentName:"p"},'"photo"'),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'POST /handler.asp HTTP/1.1\nAccept: text/*\nContent-Type: multipart/form-data;\nboundary=----------Ij5ae0ae0KM7GI3KM7ei4cH2ei4gL6\nUser-Agent: Shockwave Flash\nHost: www.mydomain.com\nContent-Length: 421\nConnection: Keep-Alive\nCache-Control: no-cache\n\n------------Ij5GI3GI3ei4GI3ei4KM7GI3KM7KM7\nContent-Disposition: form-data; name="Filename"\n\nsushi.jpg\n------------Ij5GI3GI3ei4GI3ei4KM7GI3KM7KM7\nContent-Disposition: form-data; name="api_sig"\n\nXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n------------Ij5GI3GI3ei4GI3ei4KM7GI3KM7KM7\nContent-Disposition: form-data; name="api_key"\n\nXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n------------Ij5GI3GI3ei4GI3ei4KM7GI3KM7KM7\nContent-Disposition: form-data; name="auth_token"\n\nXXXXXXXXXXXXXXXXXXXXXXX\n------------Ij5GI3GI3ei4GI3ei4KM7GI3KM7KM7\nContent-Disposition: form-data; name="photo"; filename="sushi.jpg"\nContent-Type: application/octet-stream\n\n(actual file data,,,)\n------------Ij5GI3GI3ei4GI3ei4KM7GI3KM7KM7\nContent-Disposition: form-data; name="Upload"\n\nSubmit Query\n------------Ij5GI3GI3ei4GI3ei4KM7GI3KM7KM7--\n')),(0,i.kt)("h2",{id:"downloading-files-from-a-server"},"Downloading files from a server"),(0,i.kt)("p",null,"You can let users download files from a server using the\n",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.download()")," method, which takes two parameters: ",(0,i.kt)("inlineCode",{parentName:"p"},"request")," and\n",(0,i.kt)("inlineCode",{parentName:"p"},"defaultFileName"),". The first parameter is the URLRequest object that contains\nthe URL of the file to download. The second parameter is optional\u2014it lets you\nspecify a default filename that appears in the download file dialog box. If you\nomit the second parameter, ",(0,i.kt)("inlineCode",{parentName:"p"},"defaultFileName"),", the filename from the specified\nURL is used."),(0,i.kt)("p",null,"The following code downloads a file named index.xml from the same directory as\nthe SWF file:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'var request:URLRequest = new URLRequest("index.xml");\nvar fileRef:FileReference = new FileReference();\nfileRef.download(request);\n')),(0,i.kt)("p",null,"To set the default name to currentnews.xml instead of index.xml, specify the\n",(0,i.kt)("inlineCode",{parentName:"p"},"defaultFileName")," parameter, as the following snippet shows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'var request:URLRequest = new URLRequest("index.xml");\nvar fileToDownload:FileReference = new FileReference();\nfileToDownload.download(request, "currentnews.xml");\n')),(0,i.kt)("p",null,"Renaming a file can be useful if the server filename was not intuitive or was\nserver-generated. It's also good to explicitly specify the ",(0,i.kt)("inlineCode",{parentName:"p"},"defaultFileName"),"\nparameter when you download a file using a server-side script, instead of\ndownloading the file directly. For example, you need to specify the\n",(0,i.kt)("inlineCode",{parentName:"p"},"defaultFileName")," parameter if you have a server-side script that downloads\nspecific files based on URL variables passed to it. Otherwise, the default name\nof the downloaded file is the name of your server-side script."),(0,i.kt)("p",null,"Data can be sent to the server using the ",(0,i.kt)("inlineCode",{parentName:"p"},"download()")," method by appending\nparameters to the URL for the server script to parse. The following ActionScript\n3.0 snippet downloads a document based on which parameters are passed to a\nColdFusion script:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'package\n{\n    import flash.display.Sprite;\n    import flash.net.FileReference;\n    import flash.net.URLRequest;\n    import flash.net.URLRequestMethod;\n    import flash.net.URLVariables;\n\n    public class DownloadFileExample extends Sprite\n    {\n        private var fileToDownload:FileReference;\n        public function DownloadFileExample()\n        {\n            var request:URLRequest = new URLRequest();\n            request.url = "http://www.[yourdomain].com/downloadfile.cfm";\n            request.method = URLRequestMethod.GET;\n            request.data = new URLVariables("id=2");\n            fileToDownload = new FileReference();\n            try\n            {\n                fileToDownload.download(request, "file2.txt");\n            }\n            catch (error:Error)\n            {\n                trace("Unable to download file.");\n            }\n        }\n    }\n}\n')),(0,i.kt)("p",null,"The following code demonstrates the ColdFusion script, download.cfm, that\ndownloads one of two files from the server, depending on the value of a URL\nvariable:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'<cfparam name="URL.id" default="1" />\n    <cfswitch expression="#URL.id#">\n    <cfcase value="2">\n        <cfcontent type="text/plain" file="#ExpandPath(\'two.txt\')#" deletefile="No" />\n    </cfcase>\n    <cfdefaultcase>\n        <cfcontent type="text/plain" file="#ExpandPath(\'one.txt\')#" deletefile="No" />\n    </cfdefaultcase>\n</cfswitch>\n')),(0,i.kt)("h2",{id:"filereferencelist-class"},"FileReferenceList class"),(0,i.kt)("p",null,"The FileReferenceList class lets the user select one or more files to upload to\na server-side script. The file upload is handled by the ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.upload()"),"\nmethod, which must be called on each file that the user selects."),(0,i.kt)("p",null,"The following code creates two FileFilter objects ( ",(0,i.kt)("inlineCode",{parentName:"p"},"imageFilter")," and\n",(0,i.kt)("inlineCode",{parentName:"p"},"textFilter"),") and passes them in an array to the ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReferenceList.browse()"),"\nmethod. This causes the operating system file dialog box to display two possible\nfilters for file types."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'var imageFilter:FileFilter = new FileFilter("Image Files (*.jpg, *.jpeg, *.gif, *.png)", "*.jpg; *.jpeg; *.gif; *.png");\nvar textFilter:FileFilter = new FileFilter("Text Files (*.txt, *.rtf)", "*.txt; *.rtf");\nvar fileRefList:FileReferenceList = new FileReferenceList();\ntry\n{\n    var success:Boolean = fileRefList.browse(new Array(imageFilter, textFilter));\n}\ncatch (error:Error)\n{\n    trace("Unable to browse for files.");\n}\n')),(0,i.kt)("p",null,"Allowing the user to select and upload one or more files by using the\nFileReferenceList class is the same as using ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.browse()")," to select\nfiles, although the FileReferenceList allows you to select more than one file.\nUploading multiple files requires you to upload each of the selected files by\nusing ",(0,i.kt)("inlineCode",{parentName:"p"},"FileReference.upload()"),", as the following code shows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'var fileRefList:FileReferenceList = new FileReferenceList();\nfileRefList.addEventListener(Event.SELECT, selectHandler);\nfileRefList.browse();\n\nfunction selectHandler(event:Event):void\n{\n    var request:URLRequest = new URLRequest("http://www.[yourdomain].com/fileUploadScript.cfm");\n    var file:FileReference;\n    var files:FileReferenceList = FileReferenceList(event.target);\n    var selectedFileArray:Array = files.fileList;\n    for (var i:uint = 0; i < selectedFileArray.length; i++)\n    {\n        file = FileReference(selectedFileArray[i]);\n        file.addEventListener(Event.COMPLETE, completeHandler);\n        try\n        {\n            file.upload(request);\n        }\n        catch (error:Error)\n        {\n            trace("Unable to upload files.");\n        }\n    }\n}\nfunction completeHandler(event:Event):void\n{\n    trace("uploaded");\n}\n')),(0,i.kt)("p",null,"Because the ",(0,i.kt)("inlineCode",{parentName:"p"},"Event.COMPLETE")," event is added to each individual FileReference\nobject in the array, Flash Player calls the ",(0,i.kt)("inlineCode",{parentName:"p"},"completeHandler()")," method when each\nindividual file finishes uploading."),(0,i.kt)("h2",{id:"adobe-recommends"},"Adobe recommends"),(0,i.kt)("blockquote",null,(0,i.kt)("h3",{parentName:"blockquote",id:"-load-and-save-local-files"},(0,i.kt)("a",{parentName:"h3",href:"https://web.archive.org/web/20100906103656/http://tv.adobe.com/watch/adobe-evangelists-kevin-hoyt/load-and-save-local-files"},(0,i.kt)("img",{src:t(27561).Z,width:"40",height:"40"})," Load and Save Local Files")),(0,i.kt)("p",{parentName:"blockquote"},"In this video,\n",(0,i.kt)("a",{parentName:"p",href:"https://web.archive.org/web/20160918100357/http://www.adobe.com/devnet/author_bios/kevin_hoyt.html"},"Kevin Hoyt"),"\nreveals the ease of loading and saving local content using Flash.")))}f.isMDXComponent=!0},27561:(e,n,t)=>{t.d(n,{Z:()=>a});const a="data:image/png;base64,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"},39683:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/tip_help-3d4c326bf05518d713f5bf1c3f47bcde.png"}}]);