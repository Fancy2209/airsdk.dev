"use strict";(self.webpackChunkairsdk_dev=self.webpackChunkairsdk_dev||[]).push([[30890],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>h});var a=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=a.createContext({}),d=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},c=function(e){var n=d(e.components);return a.createElement(l.Provider,{value:n},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},f=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=d(t),f=o,h=p["".concat(l,".").concat(f)]||p[f]||m[f]||r;return t?a.createElement(h,i(i({ref:n},c),{},{components:t})):a.createElement(h,i({ref:n},c))}));function h(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var r=t.length,i=new Array(r);i[0]=f;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[p]="string"==typeof e?e:o,i[1]=s;for(var d=2;d<r;d++)i[d]=t[d];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}f.displayName="MDXCreateElement"},26311:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var a=t(87462),o=(t(67294),t(3905));const r={sidebar_position:7.1},i="Connecting to a database",s={unversionedId:"development/files-and-data/working-with-local-sql-databases-in-air/connecting-to-a-database",id:"development/files-and-data/working-with-local-sql-databases-in-air/connecting-to-a-database",title:"Connecting to a database",description:"Before you can perform any database operations, first open a connection to the",source:"@site/docs/development/files-and-data/working-with-local-sql-databases-in-air/connecting-to-a-database.md",sourceDirName:"development/files-and-data/working-with-local-sql-databases-in-air",slug:"/development/files-and-data/working-with-local-sql-databases-in-air/connecting-to-a-database",permalink:"/docs/development/files-and-data/working-with-local-sql-databases-in-air/connecting-to-a-database",draft:!1,editUrl:"https://github.com/airsdk/airsdk.dev/edit/main/docs/development/files-and-data/working-with-local-sql-databases-in-air/connecting-to-a-database.md",tags:[],version:"current",sidebarPosition:7.1,frontMatter:{sidebar_position:7.1},sidebar:"mainSidebar",previous:{title:"Strategies for working with SQL databases",permalink:"/docs/development/files-and-data/working-with-local-sql-databases-in-air/strategies-for-working-with-sql-databases"},next:{title:"Working with SQL statements",permalink:"/docs/development/files-and-data/working-with-local-sql-databases-in-air/working-with-sql-statements"}},l={},d=[],c={toc:d},p="wrapper";function m(e){let{components:n,...t}=e;return(0,o.kt)(p,(0,a.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"connecting-to-a-database"},"Connecting to a database"),(0,o.kt)("p",null,"Before you can perform any database operations, first open a connection to the\ndatabase file. A\n",(0,o.kt)("a",{parentName:"p",href:"https://airsdk.dev/reference/actionscript/3.0/flash/data/SQLConnection.html"},"SQLConnection"),'\ninstance is used to represent a connection to one or more databases. The first\ndatabase that is connected using a SQLConnection instance is known as the "main"\ndatabase. This database is connected using the ',(0,o.kt)("inlineCode",{parentName:"p"},"open()")," method (for synchronous\nexecution mode) or the ",(0,o.kt)("inlineCode",{parentName:"p"},"openAsync()")," method (for asynchronous execution mode)."),(0,o.kt)("p",null,"If you open a database using the asynchronous ",(0,o.kt)("inlineCode",{parentName:"p"},"openAsync()")," operation, register\nfor the SQLConnection instance's ",(0,o.kt)("inlineCode",{parentName:"p"},"open")," event in order to know when the\n",(0,o.kt)("inlineCode",{parentName:"p"},"openAsync()")," operation completes. Register for the SQLConnection instance's\n",(0,o.kt)("inlineCode",{parentName:"p"},"error")," event to determine if the operation fails."),(0,o.kt)("p",null,'The following example shows how to open an existing database file for\nasynchronous execution. The database file is named "DBSample.db" and is located\nin the user\'s\n',(0,o.kt)("a",{parentName:"p",href:"/docs/development/files-and-data/working-with-the-file-system/using-the-air-file-system-api/working-with-file-objects-in-air#pointing-to-the-application-storage-directory"},"Pointing to the application storage directory"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'import flash.data.SQLConnection;\nimport flash.data.SQLMode;\nimport flash.events.SQLErrorEvent;\nimport flash.events.SQLEvent;\nimport flash.filesystem.File;\n\nvar conn:SQLConnection = new SQLConnection();\n\nconn.addEventListener(SQLEvent.OPEN, openHandler);\nconn.addEventListener(SQLErrorEvent.ERROR, errorHandler);\n\n// The database file is in the application storage directory\nvar folder:File = File.applicationStorageDirectory;\nvar dbFile:File = folder.resolvePath("DBSample.db");\n\nconn.openAsync(dbFile, SQLMode.UPDATE);\n\nfunction openHandler(event:SQLEvent):void\n{\n    trace("the database opened successfully");\n}\n\nfunction errorHandler(event:SQLErrorEvent):void\n{\n    trace("Error message:", event.error.message);\n    trace("Details:", event.error.details);\n}\n\n<?xml version="1.0" encoding="utf-8"?>\n<mx:WindowedApplication xmlns:mx="https://www.adobe.com/2006/mxml" creationComplete="init()">\n    <mx:Script>\n        <![CDATA[\n            import flash.data.SQLConnection;\n            import flash.data.SQLMode;\n            import flash.events.SQLErrorEvent;\n            import flash.events.SQLEvent;\n            import flash.filesystem.File;\n\n            private function init():void\n            {\n                var conn:SQLConnection = new SQLConnection();\n\n                conn.addEventListener(SQLEvent.OPEN, openHandler);\n                conn.addEventListener(SQLErrorEvent.ERROR, errorHandler);\n\n                // The database file is in the application storage directory\n                var folder:File = File.applicationStorageDirectory;\n                var dbFile:File = folder.resolvePath("DBSample.db");\n\n                conn.openAsync(dbFile, SQLMode.UPDATE);\n            }\n\n            private function openHandler(event:SQLEvent):void\n            {\n                trace("the database opened successfully");\n            }\n\n            private function errorHandler(event:SQLErrorEvent):void\n            {\n                trace("Error message:", event.error.message);\n                trace("Details:", event.error.details);\n            }\n        ]]>\n    </mx:Script>\n</mx:WindowedApplication>\n')),(0,o.kt)("p",null,'The following example shows how to open an existing database file for\nsynchronous execution. The database file is named "DBSample.db" and is located\nin the user\'s\n',(0,o.kt)("a",{parentName:"p",href:"/docs/development/files-and-data/working-with-the-file-system/using-the-air-file-system-api/working-with-file-objects-in-air#pointing-to-the-application-storage-directory"},"Pointing to the application storage directory"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'import flash.data.SQLConnection;\nimport flash.data.SQLMode;\nimport flash.errors.SQLError;\nimport flash.filesystem.File;\n\nvar conn:SQLConnection = new SQLConnection();\n\n// The database file is in the application storage directory\nvar folder:File = File.applicationStorageDirectory;\nvar dbFile:File = folder.resolvePath("DBSample.db");\n\ntry\n{\n    conn.open(dbFile, SQLMode.UPDATE);\n    trace("the database opened successfully");\n}\ncatch (error:SQLError)\n{\n    trace("Error message:", error.message);\n    trace("Details:", error.details);\n}\n\n<?xml version="1.0" encoding="utf-8"?>\n<mx:WindowedApplication xmlns:mx="https://www.adobe.com/2006/mxml" creationComplete="init()">\n    <mx:Script>\n        <![CDATA[\n            import flash.data.SQLConnection;\n            import flash.data.SQLMode;\n            import flash.errors.SQLError;\n            import flash.filesystem.File;\n\n            private function init():void\n            {\n                var conn:SQLConnection = new SQLConnection();\n\n                // The database file is in the application storage directory\n                var folder:File = File.applicationStorageDirectory;\n                var dbFile:File = folder.resolvePath("DBSample.db");\n\n                try\n                {\n                    conn.open(dbFile, SQLMode.UPDATE);\n                    trace("the database opened successfully");\n                }\n                catch (error:SQLError)\n                {\n                    trace("Error message:", error.message);\n                    trace("Details:", error.details);\n                }\n            }\n        ]]>\n    </mx:Script>\n</mx:WindowedApplication>\n')),(0,o.kt)("p",null,"Notice that in the ",(0,o.kt)("inlineCode",{parentName:"p"},"openAsync()")," method call in the asynchronous example, and\nthe ",(0,o.kt)("inlineCode",{parentName:"p"},"open()")," method call in the synchronous example, the second argument is the\nconstant ",(0,o.kt)("inlineCode",{parentName:"p"},"SQLMode.UPDATE"),". Specifying ",(0,o.kt)("inlineCode",{parentName:"p"},"SQLMode.UPDATE")," for the second parameter\n( ",(0,o.kt)("inlineCode",{parentName:"p"},"openMode"),") causes the runtime to dispatch an error if the specified file\ndoesn't exist. If you pass ",(0,o.kt)("inlineCode",{parentName:"p"},"SQLMode.CREATE")," for the ",(0,o.kt)("inlineCode",{parentName:"p"},"openMode")," parameter (or if\nyou leave the ",(0,o.kt)("inlineCode",{parentName:"p"},"openMode")," parameter off), the runtime attempts to create a\ndatabase file if the specified file doesn't exist. However, if the file exists\nit is opened, which is the same as if you use ",(0,o.kt)("inlineCode",{parentName:"p"},"SQLMode.Update"),". You can also\nspecify ",(0,o.kt)("inlineCode",{parentName:"p"},"SQLMode.READ")," for the ",(0,o.kt)("inlineCode",{parentName:"p"},"openMode")," parameter to open an existing database\nin a read-only mode. In that case data can be retrieved from the database but no\ndata can be added, deleted, or changed."))}m.isMDXComponent=!0}}]);