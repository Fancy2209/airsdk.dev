"use strict";(self.webpackChunkairsdk_dev=self.webpackChunkairsdk_dev||[]).push([[85750],{3905:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>g});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var d=n.createContext({}),l=function(e){var t=n.useContext(d),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},s=function(e){var t=l(e.components);return n.createElement(d.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,d=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),c=l(a),u=r,g=c["".concat(d,".").concat(u)]||c[u]||m[u]||o;return a?n.createElement(g,i(i({ref:t},s),{},{components:a})):n.createElement(g,i({ref:t},s))}));function g(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=u;var p={};for(var d in t)hasOwnProperty.call(t,d)&&(p[d]=t[d]);p.originalType=e,p[c]="string"==typeof e?e:r,i[1]=p;for(var l=2;l<o;l++)i[l]=a[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},72552:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>p,toc:()=>l});var n=a(87462),r=(a(67294),a(3905));const o={sidebar_position:2},i="Supporting the drag-out gesture",p={unversionedId:"development/user-interaction/drag-and-drop-in-air/supporting-the-drag-out-gesture",id:"development/user-interaction/drag-and-drop-in-air/supporting-the-drag-out-gesture",title:"Supporting the drag-out gesture",description:"To support the drag-out gesture, you must create a Clipboard object in response",source:"@site/docs/development/user-interaction/drag-and-drop-in-air/supporting-the-drag-out-gesture.md",sourceDirName:"development/user-interaction/drag-and-drop-in-air",slug:"/development/user-interaction/drag-and-drop-in-air/supporting-the-drag-out-gesture",permalink:"/docs/development/user-interaction/drag-and-drop-in-air/supporting-the-drag-out-gesture",draft:!1,editUrl:"https://github.com/airsdk/airsdk.dev/edit/main/docs/development/user-interaction/drag-and-drop-in-air/supporting-the-drag-out-gesture.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"mainSidebar",previous:{title:"Basics of drag and drop in AIR",permalink:"/docs/development/user-interaction/drag-and-drop-in-air/basics-of-drag-and-drop-in-air"},next:{title:"Supporting the drag-in gesture",permalink:"/docs/development/user-interaction/drag-and-drop-in-air/supporting-the-drag-in-gesture"}},d={},l=[{value:"Preparing data for transfer",id:"preparing-data-for-transfer",level:2},{value:"Starting a drag-out operation",id:"starting-a-drag-out-operation",level:2},{value:"Completing a drag-out transfer",id:"completing-a-drag-out-transfer",level:2}],s={toc:l},c="wrapper";function m(e){let{components:t,...a}=e;return(0,r.kt)(c,(0,n.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"supporting-the-drag-out-gesture"},"Supporting the drag-out gesture"),(0,r.kt)("p",null,"To support the drag-out gesture, you must create a Clipboard object in response\nto a ",(0,r.kt)("inlineCode",{parentName:"p"},"mouseDown")," event and send it to the ",(0,r.kt)("inlineCode",{parentName:"p"},"NativeDragManager.doDrag()")," method.\nYour application can then listen for the ",(0,r.kt)("inlineCode",{parentName:"p"},"nativeDragComplete")," event on the\ninitiating object to determine what action to take when the user completes or\nabandons the gesture."),(0,r.kt)("h2",{id:"preparing-data-for-transfer"},"Preparing data for transfer"),(0,r.kt)("p",null,"To prepare data or an object for dragging, create a Clipboard object and add the\ninformation to be transferred in one or more formats. You can use the standard\ndata formats to pass data that can be translated automatically to native\nclipboard formats, and application-defined formats to pass objects."),(0,r.kt)("p",null,"If it is computationally expensive to convert the information to be transferred\ninto a particular format, you can supply the name of a handler function to\nperform the conversion. The function is called if and only if the receiving\ncomponent or application reads the associated format."),(0,r.kt)("p",null,"For more information on clipboard formats, see\n",(0,r.kt)("a",{parentName:"p",href:"/docs/development/user-interaction/copy-and-paste/clipboard-data-formats"},"Clipboard data formats"),"."),(0,r.kt)("p",null,"The following example illustrates how to create a Clipboard object containing a\nbitmap in several formats: a Bitmap object, a native bitmap format, and a file\nlist format containing the file from which the bitmap was originally loaded:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'import flash.desktop.Clipboard;\nimport flash.display.Bitmap;\nimport flash.filesystem.File;\npublic function createClipboard(image:Bitmap, sourceFile:File):Clipboard{\n    var transfer:Clipboard = new Clipboard();\n    transfer.setData("CUSTOM_BITMAP", image, true); //Flash object by value and by reference\n    transfer.setData(ClipboardFormats.BITMAP_FORMAT, image.bitmapData, false);\n    transfer.setData(ClipboardFormats.FILE_LIST_FORMAT, new Array(sourceFile), false);\n    return transfer;\n}\n')),(0,r.kt)("h2",{id:"starting-a-drag-out-operation"},"Starting a drag-out operation"),(0,r.kt)("p",null,"To start a drag operation, call the ",(0,r.kt)("inlineCode",{parentName:"p"},"NativeDragManager.doDrag()")," method in\nresponse to a mouse down event. The ",(0,r.kt)("inlineCode",{parentName:"p"},"doDrag()")," method is a static method that\ntakes the following parameters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"initiator"),(0,r.kt)("td",{parentName:"tr",align:null},"The object from which the drag originates, and which dispatches the ",(0,r.kt)("inlineCode",{parentName:"td"},"dragStart")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"dragComplete")," events. The initiator must be an interactive object.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"clipboard"),(0,r.kt)("td",{parentName:"tr",align:null},"The Clipboard object containing the data to be transferred. The Clipboard object is referenced in the NativeDragEvent objects dispatched during the drag-and-drop sequence.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dragImage"),(0,r.kt)("td",{parentName:"tr",align:null},"(Optional) A BitmapData object to display during the drag. The image can specify an ",(0,r.kt)("inlineCode",{parentName:"td"},"alpha")," value. (Note: Microsoft Windows always applies a fixed alpha fade to drag images).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"offset"),(0,r.kt)("td",{parentName:"tr",align:null},"(Optional) A Point object specifying the offset of the drag image from the mouse hotspot. Use negative coordinates to move the drag image up and left relative to the mouse cursor. If no offset is provided, the top, left corner of the drag image is positioned at the mouse hotspot.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"actionsAllowed"),(0,r.kt)("td",{parentName:"tr",align:null},'(Optional) A NativeDragOptions object specifying which actions (copy, move, or link) are valid for the drag operation. If no argument is provided, all actions are permitted. The DragOptions object is referenced in NativeDragEvent objects to enable a potential drag target to check that the allowed actions are compatible with the purpose of the target component. For example, a "trash" component might only accept drag gestures that allow the move action.')))),(0,r.kt)("p",null,"The following example illustrates how to start a drag operation for a bitmap\nobject loaded from a file. The example loads an image and, on a ",(0,r.kt)("inlineCode",{parentName:"p"},"mouseDown"),"\nevent, starts the drag operation."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'package\n{\n    import flash.desktop.NativeDragManager;\n    import mx.core.UIComponent;\n    import flash.display.Sprite;\n    import flash.display.Loader;\n    import flash.system.LoaderContext;\n    import flash.net.URLRequest;\n    import flash.geom.Point;\n    import flash.desktop.Clipboard;\n    import flash.display.Bitmap;\n    import flash.filesystem.File;\n    import flash.events.Event;\n    import flash.events.MouseEvent;\n\n    public class DragOutExample extends UIComponent Sprite {\n        protected var fileURL:String = "app:/image.jpg";\n        protected var display:Bitmap;\n\n        private function init():void {\n            loadImage();\n        }\n        private function onMouseDown(event:MouseEvent):void {\n            var bitmapFile:File = new File(fileURL);\n            var transferObject:Clipboard = createClipboard(display, bitmapFile);\n            NativeDragManager.doDrag(this,\n                                transferObject,\n                                display.bitmapData,\n                                new Point(-mouseX,-mouseY));\n        }\n        public function createClipboard(image:Bitmap, sourceFile:File):Clipboard {\n            var transfer:Clipboard = new Clipboard();\n            transfer.setData("bitmap",\n                                image,\n                                true);\n                                // ActionScript 3 Bitmap object by value and by reference\n            transfer.setData(ClipboardFormats.BITMAP_FORMAT,\n                                image.bitmapData,\n                                false);\n                                // Standard BitmapData format\n            transfer.setData(ClipboardFormats.FILE_LIST_FORMAT,\n                                new Array(sourceFile),\n                                false);\n                                // Standard file list format\n            return transfer;\n        }\n        private function loadImage():void {\n            var url:URLRequest = new URLRequest(fileURL);\n            var loader:Loader = new Loader();\n            loader.load(url,new LoaderContext());\n            loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onLoadComplete);\n        }\n        private function onLoadComplete(event:Event):void {\n            display = event.target.loader.content;\n            var flexWrapper:UIComponent = new UIComponent();\n            flexWrapper.addChild(event.target.loader.content);\n            addChild(flexWrapper);\n            flexWrapper.addEventListener(MouseEvent.MOUSE_DOWN, onMouseDown);\n        }\n    }\n}\n')),(0,r.kt)("h2",{id:"completing-a-drag-out-transfer"},"Completing a drag-out transfer"),(0,r.kt)("p",null,"When a user drops the dragged item by releasing the mouse, the initiator object\ndispatches a ",(0,r.kt)("inlineCode",{parentName:"p"},"nativeDragComplete")," event. You can check the ",(0,r.kt)("inlineCode",{parentName:"p"},"dropAction")," property\nof the event object and then take the appropriate action. For example, if the\naction is ",(0,r.kt)("inlineCode",{parentName:"p"},"NativeDragAction.MOVE,")," you could remove the source item from its\noriginal location. The user can abandon a drag gesture by releasing the mouse\nbutton while the cursor is outside an eligible drop target. The drag manager\nsets the ",(0,r.kt)("inlineCode",{parentName:"p"},"dropAction")," property for an abandoned gesture to\n",(0,r.kt)("inlineCode",{parentName:"p"},"NativeDragAction.NONE"),"."))}m.isMDXComponent=!0}}]);